(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82928,e=>{"use strict";e.s(["BuilderFeeApprovalError",()=>p,"useApproveBuilderFee",()=>u]);var r=e.i(590268),t=e.i(683269),a=e.i(732037),i=e.i(227440),o=e.i(797968),s=e.i(798030),l=e.i(940704),n=e.i(963724),d=e.i(614881);class p extends Error{constructor(e){super(e),this.name="BuilderFeeApprovalError"}}function u(e){let u,c,A,v,F,g,E,y,x,h,B,T=(0,r.c)(45),m=(0,l.useTranslations)("PerpsTradeModule"),{showSuccessMessage:w,showErrorMessage:P}=(0,t.useToasts)(),{info:M,wallet:R}=(0,n.useHyperliquidClients)(),S=(0,i.useTrackEvent)();T[0]!==e||T[1]!==M||T[2]!==R?(u=e&&M&&R&&(0,a.isEvmAddress)(e),T[0]=e,T[1]=M,T[2]=R,T[3]=u):u=T[3];let j=!!u;T[4]!==e?(c=["builderFeeApproval",e],T[4]=e,T[5]=c):c=T[5],T[6]!==e||T[7]!==M?(A=async()=>await M.maxBuilderFee({user:e,builder:d.BUILDER_ADDRESS})>=d.BUILDER_FEE_BASIS_POINTS,T[6]=e,T[7]=M,T[8]=A):A=T[8],T[9]!==j||T[10]!==c||T[11]!==A?(v={queryKey:c,queryFn:A,enabled:j},T[9]=j,T[10]=c,T[11]=A,T[12]=v):v=T[12];let{data:_,refetch:b}=(0,s.useQuery)(v),D=null!=_&&_;T[13]!==e?(F=["approveBuilderFee",e],T[13]=e,T[14]=F):F=T[14],T[15]!==e||T[16]!==M||T[17]!==b||T[18]!==m||T[19]!==S||T[20]!==R?(g=async()=>{if(!(R&&M&&e&&(0,a.isEvmAddress)(e)))throw new p(m("walletNotConnected"));await R.approveBuilderFee({builder:d.BUILDER_ADDRESS,maxFeeRate:d.BUILDER_MAX_FEE_RATE}),S("Perps Builder Fee Approved",{builderAddress:d.BUILDER_ADDRESS,maxFeeRate:d.BUILDER_MAX_FEE_RATE});let{data:r}=await b();if(!r)throw new p(m("builderFeeApprovalFailed"))},T[15]=e,T[16]=M,T[17]=b,T[18]=m,T[19]=S,T[20]=R,T[21]=g):g=T[21],T[22]!==w||T[23]!==m?(E=()=>{w(m("builderFeeApproved"))},T[22]=w,T[23]=m,T[24]=E):E=T[24],T[25]!==P||T[26]!==m||T[27]!==S?(y=e=>{console.error("Failed to approve builder fee:",e),S("Perps Builder Fee Approval Failed",{error:e.message}),P(m("builderFeeApprovalFailed"))},T[25]=P,T[26]=m,T[27]=S,T[28]=y):y=T[28],T[29]!==F||T[30]!==g||T[31]!==E||T[32]!==y?(x={mutationKey:F,mutationFn:g,onSuccess:E,onError:y},T[29]=F,T[30]=g,T[31]=E,T[32]=y,T[33]=x):x=T[33];let f=(0,o.useMutation)(x);T[34]!==e||T[35]!==M||T[36]!==f||T[37]!==b||T[38]!==m||T[39]!==R?(h=async()=>{if(!(R&&M&&e&&(0,a.isEvmAddress)(e)))throw new p(m("walletNotConnected"));let{data:r}=await b();r||await f.mutateAsync()},T[34]=e,T[35]=M,T[36]=f,T[37]=b,T[38]=m,T[39]=R,T[40]=h):h=T[40];let C=h;return T[41]!==C||T[42]!==D||T[43]!==f?(B={mutation:f,isApproved:D,ensureApproved:C},T[41]=C,T[42]=D,T[43]=f,T[44]=B):B=T[44],B}},55585,e=>{"use strict";e.s(["useApproveAgent",()=>c],55585);var r=e.i(590268),t=e.i(683269),a=e.i(227440),i=e.i(797968),o=e.i(940704),s=e.i(300059),l=e.i(265710),n=e.i(918995),d=e.i(963724),p=e.i(614881),u=e.i(82928);function c(e){let c,A,v,F,g,E,y=(0,r.c)(23),{address:x}=e,h=(0,o.useTranslations)("PerpsTradeModule"),{showSuccessMessage:B,showErrorMessage:T}=(0,t.useToasts)(),{isApproved:m,ensureApproved:w}=(0,u.useApproveBuilderFee)(x),{apiWallet:P,wallet:M}=(0,d.useHyperliquidClients)(),R=(0,a.useTrackEvent)();y[0]!==x?(c=["approveAgent",x],y[0]=x,y[1]=c):c=y[1],y[2]!==x||y[3]!==w||y[4]!==h||y[5]!==R||y[6]!==M?(A=async()=>{if(!(M&&x))throw Error(h("walletNotConnected"));await w();let e=(0,l.toHex)(s.secp256k1.utils.randomPrivateKey()),r=(0,n.privateKeyToAccount)(e);await M.approveAgent({agentAddress:r.address,agentName:p.AGENT_NAME}),(0,d.setHyperliquidPrivateKey)(x,e),R("Perps Agent Approved",{agentAddress:r.address})},y[2]=x,y[3]=w,y[4]=h,y[5]=R,y[6]=M,y[7]=A):A=y[7],y[8]!==B||y[9]!==h?(v=()=>{B(h("agentApproved"))},y[8]=B,y[9]=h,y[10]=v):v=y[10],y[11]!==T||y[12]!==h||y[13]!==R?(F=e=>{console.error("Failed to approve agent:",e),R("Perps Agent Approval Failed",{error:e.message}),T(h("agentApprovalFailed"))},y[11]=T,y[12]=h,y[13]=R,y[14]=F):F=y[14],y[15]!==c||y[16]!==A||y[17]!==v||y[18]!==F?(g={mutationKey:c,mutationFn:A,onSuccess:v,onError:F},y[15]=c,y[16]=A,y[17]=v,y[18]=F,y[19]=g):g=y[19];let S=(0,i.useMutation)(g),j=!!P&&m;return y[20]!==j||y[21]!==S?(E={mutation:S,isAgentApproved:j},y[20]=j,y[21]=S,y[22]=E):E=y[22],E}},619680,e=>{"use strict";e.s(["ApprovePerpetualAgentModal",()=>p]);var r=e.i(705378),t=e.i(590268),a=e.i(965523),i=e.i(972483),o=e.i(950293),s=e.i(940704),l=e.i(866504);e.i(500598);var n=e.i(207225),d=e.i(55585);let p=()=>{let e,p,u,c,A,v,F,g,E,y,x,h,B,T,m,w,P,M=(0,t.c)(44),R=(0,s.useTranslations)("ApprovePerpetualAgentModal"),{isApprovePerpetualAgentModalOpen:S,setIsApprovePerpetualAgentModalOpen:j}=(0,l.useHyperliquidInfoStore)(),_=(0,n.useAddress)();M[0]!==_?(e={address:_},M[0]=_,M[1]=e):e=M[1];let{mutation:b}=(0,d.useApproveAgent)(e);M[2]!==R?(p=R("title"),M[2]=R,M[3]=p):p=M[3],M[4]!==p?(u=(0,r.jsx)(i.ModalHeader,{children:(0,r.jsx)(i.ModalHeaderTitle,{children:p})}),M[4]=p,M[5]=u):u=M[5],M[6]!==R?(c=R("paragraph1"),M[6]=R,M[7]=c):c=M[7],M[8]!==c?(A=(0,r.jsx)(o.TextBody,{color:"text-secondary",children:c}),M[8]=c,M[9]=A):A=M[9],M[10]!==R?(v=R("paragraph2"),M[10]=R,M[11]=v):v=M[11],M[12]!==v?(F=(0,r.jsx)(o.TextBody,{color:"text-secondary",children:v}),M[12]=v,M[13]=F):F=M[13],M[14]!==R?(g=R("paragraph3"),M[14]=R,M[15]=g):g=M[15],M[16]!==g?(E=(0,r.jsx)(o.TextBody,{color:"text-secondary",children:g}),M[16]=g,M[17]=E):E=M[17],M[18]!==R?(y=R("paragraph4"),M[18]=R,M[19]=y):y=M[19],M[20]!==y?(x=(0,r.jsx)(o.TextBody,{color:"text-secondary",children:y}),M[20]=y,M[21]=x):x=M[21],M[22]!==x||M[23]!==A||M[24]!==F||M[25]!==E?(h=(0,r.jsx)(i.ModalBody,{children:(0,r.jsxs)(a.FlexColumn,{className:"gap-4",children:[A,F,E,x]})}),M[22]=x,M[23]=A,M[24]=F,M[25]=E,M[26]=h):h=M[26];let D=b.isPending;return M[27]!==b||M[28]!==j?(B=()=>b.mutate(void 0,{onSuccess:()=>j(!1)}),M[27]=b,M[28]=j,M[29]=B):B=M[29],M[30]!==R?(T=R("approveAgent"),M[30]=R,M[31]=T):T=M[31],M[32]!==b.isPending||M[33]!==B||M[34]!==T?(m=(0,r.jsx)(i.ModalFooter,{children:(0,r.jsx)(i.ModalFooterButton,{isLoading:D,onClick:B,children:T})}),M[32]=b.isPending,M[33]=B,M[34]=T,M[35]=m):m=M[35],M[36]!==h||M[37]!==m||M[38]!==u?(w=(0,r.jsxs)(r.Fragment,{children:[u,h,m]}),M[36]=h,M[37]=m,M[38]=u,M[39]=w):w=M[39],M[40]!==S||M[41]!==j||M[42]!==w?(P=(0,r.jsx)(i.Modal,{content:w,onOpenChange:j,open:S}),M[40]=S,M[41]=j,M[42]=w,M[43]=P):P=M[43],P}},232201,e=>{e.n(e.i(619680))}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e9468d2c-f79a-5412-a4e1-087ba8efdc24")}catch(e){}}();
//# debugId=e9468d2c-f79a-5412-a4e1-087ba8efdc24
