(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,904663,337021,e=>{"use strict";e.s(["RiveChest",()=>E],904663);var n=e.i(705378),r=e.i(437153),a=e.i(39771),t=e.i(254175),s=e.i(969498);e.s(["getChestRiveFile",()=>u],337021);var i=e.i(356229),l=e.i(607172);let d={1:l.TREASURE_CHEST_RIVE_LEVEL_1,2:l.TREASURE_CHEST_RIVE_LEVEL_2,3:l.TREASURE_CHEST_RIVE_LEVEL_3,4:l.TREASURE_CHEST_RIVE_LEVEL_4,5:l.TREASURE_CHEST_RIVE_LEVEL_5,6:l.TREASURE_CHEST_RIVE_LEVEL_6,7:l.TREASURE_CHEST_RIVE_LEVEL_7,8:l.TREASURE_CHEST_RIVE_LEVEL_8,9:l.TREASURE_CHEST_RIVE_LEVEL_9,10:l.TREASURE_CHEST_RIVE_LEVEL_10,11:l.TREASURE_CHEST_RIVE_LEVEL_11,12:l.TREASURE_CHEST_RIVE_LEVEL_12,13:l.TREASURE_CHEST_RIVE_LEVEL_13};function u(e){return d[Math.max(1,Math.min(i.TOTAL_CHEST_LEVELS,e))]||l.TREASURE_CHEST_RIVE_LEVEL_1}let o=(0,t.default)(()=>e.A(460568).then(e=>{let{useRive:a}=e,t=(0,s.forwardRef)((e,t)=>{let{src:i,stateMachines:l,onReady:d}=e,[u,o]=(0,s.useState)(!1),[E,m]=(0,s.useState)(!1),_=(0,s.useRef)(null),{rive:c,RiveComponent:C}=a({src:i,stateMachines:l,autoplay:!0,onLoad:()=>{o(!1),m(!0),_.current=c,null==d||d()},onLoadError:e=>{console.error("[RiveChest] Failed to load animation:",e),o(!0)}});return((0,s.useImperativeHandle)(t,()=>({fireInput:e=>{if(!c)return;let n=Array.isArray(l)?l[0]:l;try{var r;let a=c.stateMachineInputs(n||""),t=null==a?void 0:a.find(n=>n.name===e);null==t||null==(r=t.fire)||r.call(t)}catch(e){}}}),[c,l]),u)?null:(0,n.jsx)("div",{className:(0,r.classNames)("size-full",!E&&"opacity-0"),children:(0,n.jsx)(C,{className:"size-full"})})});return t.displayName="RiveChestInner",{default:t}}),{loadableGenerated:{modules:[356647]},loading:()=>null,ssr:!1}),E=(0,s.forwardRef)((e,t)=>{let{level:s,stateMachines:i,width:l,height:d,className:E,onReady:m}=e,_=u(s);return(0,n.jsx)(a.FlexCenter,{className:(0,r.classNames)("shrink-0 justify-center",E),style:{width:l,height:d},children:(0,n.jsx)(o,{onReady:m,ref:t,src:_,stateMachines:i})})});E.displayName="RiveChest"},308641,e=>{"use strict";e.s(["useOpenableTreasureChests",()=>d]);var n=e.i(590268),r=e.i(528198),a=e.i(731049),t=e.i(731950),s=e.i(553919),i=e.i(598777);let l=(0,r.graphql)("\n    query useOpenableTreasureChestsQuery {\n      openableTreasureChests {\n        items {\n          id\n          userRewards {\n            id\n            claimedAt\n          }\n          userTokenRewards {\n            id\n            claimedAt\n          }\n          userProgress {\n            totalPoints\n            hasExceededLevelCap\n            currentLevel\n            currentTier\n            levelProgressPercent\n          }\n          userTreasures {\n            ...OpenChestButton_treasure\n          }\n          waveName\n          ...TreasureChestWave\n          ...OpenChestButton\n          ...OpenTreasureChestModal\n        }\n      }\n            mostRecentlyEndedTreasureChest {\n              id\n              openStart\n              userRewards {\n                id\n                claimedAt\n              }\n              userTokenRewards {\n                id\n                claimedAt\n              }\n              userProgress {\n                totalPoints\n                hasExceededLevelCap\n                currentLevel\n                currentTier\n                levelProgressPercent\n              }\n              userTreasures {\n                ...OpenChestButton_treasure\n              }\n              waveName\n              ...TreasureChestWave\n              ...OpenChestButton\n              ...OpenTreasureChestModal\n            }\n    }\n  ",[s.TreasureChestWaveFragment,a.OpenChestButtonFragment,a.OpenChestButton_treasureFragment,t.OpenTreasureChestModalFragment]);function d(){var e,r,a,t,s,d,o,E,m;let _,c,C,T,h,L,g,R,p,S,v,V=(0,n.c)(24);V[0]===Symbol.for("react.memo_cache_sentinel")?(_={query:l},c={throwOnError:!1},V[0]=_,V[1]=c):(_=V[0],c=V[1]);let[w,O]=(0,i.useAuthenticatedQuery)(_,c);V[2]!==w?({data:C,fetching:T,stale:L,...h}=w,V[2]=w,V[3]=C,V[4]=T,V[5]=h,V[6]=L):(C=V[3],T=V[4],h=V[5],L=V[6]),V[7]!==(null==C||null==(e=C.openableTreasureChests)?void 0:e.items)?(g=null!=(d=null==C||null==(t=C.openableTreasureChests)?void 0:t.items)?d:[],V[7]=null==C||null==(s=C.openableTreasureChests)?void 0:s.items,V[8]=g):g=V[8];let y=g;V[9]!==(null==C?void 0:C.mostRecentlyEndedTreasureChest)||V[10]!==y?(p=y.at(0),R=null==C?void 0:C.mostRecentlyEndedTreasureChest,S=(null!=(o=null==p?void 0:p.userTreasures)?o:[]).filter(u),V[9]=null==C?void 0:C.mostRecentlyEndedTreasureChest,V[10]=y,V[11]=R,V[12]=p,V[13]=S):(R=V[11],p=V[12],S=V[13]);let f=S,I=(null!=(E=null==p||null==(r=p.userRewards)?void 0:r.length)?E:0)>0||(null!=(m=null==p||null==(a=p.userTokenRewards)?void 0:a.length)?m:0)>0||f.length>0;return V[14]!==T||V[15]!==I||V[16]!==R||V[17]!==p||V[18]!==y||V[19]!==O||V[20]!==h||V[21]!==L||V[22]!==f?(v={openableTreasureChests:y,openableTreasureChest:p,mostRecentlyEndedTreasureChest:R,hasRewards:I,treasures:f,fetching:T,stale:L,...h,refetch:O},V[14]=T,V[15]=I,V[16]=R,V[17]=p,V[18]=y,V[19]=O,V[20]=h,V[21]=L,V[22]=f,V[23]=v):v=V[23],v}function u(e){return!!e}},731049,845139,589534,320464,295165,731950,553919,e=>{"use strict";e.s(["OpenChestButtonFragment",()=>R,"OpenChestButton_treasureFragment",()=>g],731049);var n=e.i(528198);e.s(["OpenTreasureChestModalFragment",()=>L,"OpenTreasureChestModal_treasureFragment",()=>h],731950),e.s(["ItemRewardCardFragment",()=>u],589534);var r=e.i(682576),a=e.i(201578),t=e.i(959105);e.i(661049);var s=e.i(190519),i=e.i(846428),l=e.i(57465);e.s(["GrandPrizeModalFragment",()=>d],845139);let d=(0,n.graphql)("\n    fragment GrandPrizeModal on UserReward {\n      id\n      treasureChestId\n      item {\n        id\n        name\n        collection {\n          ...CollectionLockup\n          ...CollectionPreviewTooltip\n          name\n          imageUrl\n        }\n      }\n    }\n  ",[r.CollectionLockupFragment,a.CollectionPreviewTooltipFragment]),u=(0,n.graphql)("\n    fragment ItemRewardCard on UserReward {\n      id\n      address\n      claimedAt\n      orderId\n      isGrandPrize\n      ...ItemRewardMedia\n      ...GrandPrizeModal\n      item {\n        id\n        name\n        imageUrl\n        ...ItemLink\n        collection {\n          ...CollectionLockup\n          ...CollectionLink\n          ...CollectionPreviewTooltip\n          name\n          imageUrl\n        }\n        ...useBuyItems\n      }\n    }\n  ",[r.CollectionLockupFragment,i.useBuyItemsFragment,s.ItemLinkFragment,t.CollectionLinkFragment,a.CollectionPreviewTooltipFragment,l.ItemRewardMediaFragment,d]);var o=e.i(234761);e.s(["TokenRewardCardFragment",()=>c],320464);var E=e.i(767502),m=e.i(332238),_=e.i(279155);let c=(0,n.graphql)("\n    fragment TokenRewardCard on UserTokenReward {\n      id\n      address\n      treasureChestId\n      claimedAt\n      airdrop\n      ...TokenRewardMedia\n      claimActions {\n        actions {\n          ...ActionTimeline\n        }\n      }\n      balance {\n        usdValue\n        quantity\n        currency {\n          name\n          symbol\n          ...ContextCurrency\n        }\n      }\n    }\n  ",[m.ActionTimelineFragment,E.ContextCurrencyFragment,_.TokenRewardMediaFragment]);e.s(["TreasureRewardCardFragment",()=>T],295165);var C=e.i(186869);let T=(0,n.graphql)("\n    fragment TreasureRewardCard on Badge {\n      id\n      name\n      description\n      ...TreasureRewardMedia\n    }\n  ",[C.TreasureRewardMediaFragment]),h=(0,n.graphql)("\n    fragment OpenTreasureChestModal_treasure on Badge {\n      __typename\n      id\n      name\n      ...TreasureRewardCard\n    }\n  ",[T]),L=(0,n.graphql)("\n    fragment OpenTreasureChestModal on TreasureChest {\n      id\n      waveName\n      openEnd\n      chestLevels {\n        level\n        pointsRequired\n      }\n      userProgress {\n        totalPoints\n        hasExceededLevelCap\n        currentLevel\n        currentTier\n        levelProgressPercent\n        minimumVoyageChestLevel {\n          level\n          name\n        }\n      }\n      userRewards {\n        __typename\n        id\n        treasureChestId\n        claimedAt\n        address\n        ...ItemRewardCard\n        ...SortRewardsByValue_item\n      }\n      userTokenRewards {\n        __typename\n        id\n        treasureChestId\n        claimedAt\n        address\n        ...TokenRewardCard\n        ...SortRewardsByValue_token\n      }\n      userTreasures {\n        ...OpenTreasureChestModal_treasure\n      }\n    }\n  ",[u,o.SortRewardsByValue_itemFragment,c,o.SortRewardsByValue_tokenFragment,h]),g=(0,n.graphql)("\n    fragment OpenChestButton_treasure on Badge {\n      name\n      ...OpenTreasureChestModal_treasure\n    }\n  ",[h]),R=(0,n.graphql)("\n    fragment OpenChestButton on TreasureChest {\n      ...OpenTreasureChestModal\n      userProgress {\n        totalPoints\n      }\n      userRewards {\n        id\n        claimedAt\n      }\n      userTokenRewards {\n        id\n        claimedAt\n      }\n      userTreasures {\n        ...OpenChestButton_treasure\n      }\n    }\n  ",[L,g]);e.s(["TreasureChestWaveFragment",()=>p],553919);let p=(0,n.graphql)("\n  fragment TreasureChestWave on TreasureChest {\n    id\n    name\n    waveName\n  }\n")},598777,e=>{"use strict";e.s(["useAuthenticatedQuery",()=>i]);var n=e.i(590268),r=e.i(333799);e.i(500598);var a=e.i(207225),t=e.i(71105);let s={requestPolicy:"cache-and-network"};function i(e,i){let l,d,u,o,E,m,_,c,C,T,h=(0,n.c)(27);h[0]!==i?(l=void 0===i?{}:i,h[0]=i,h[1]=l):l=h[1];let{throwOnError:L}=l,g=void 0===L||L,R=(0,a.useAddress)(),p=(0,t.useAuthenticated)(),S=p&&R?"authenticated:".concat(R):void 0;h[2]!==e?({variables:E,pause:u,context:d,...o}=e,h[2]=e,h[3]=d,h[4]=u,h[5]=o,h[6]=E):(d=h[3],u=h[4],o=h[5],E=h[6]);let v=!!u||!(p&&R);h[7]!==S?(m=S&&{_authKey:S},h[7]=S,h[8]=m):m=h[8],h[9]!==m||h[10]!==E?(_={...E,...m},h[9]=m,h[10]=E,h[11]=_):_=h[11];let V=_,w=null!=d?d:s;h[12]!==o||h[13]!==v||h[14]!==V||h[15]!==w?(c={...o,variables:V,pause:v,context:w},h[12]=o,h[13]=v,h[14]=V,h[15]=w,h[16]=c):c=h[16],h[17]!==g?(C={throwOnError:g},h[17]=g,h[18]=C):C=h[18];let[O,y]=(0,r.useQuery)(c,C);if(!(p&&R)){let e,n;return h[19]!==O?(e={...O,data:void 0},h[19]=O,h[20]=e):e=h[20],h[21]!==y||h[22]!==e?(n=[e,y],h[21]=y,h[22]=e,h[23]=n):n=h[23],n}return h[24]!==y||h[25]!==O?(T=[O,y],h[24]=y,h[25]=O,h[26]=T):T=h[26],T}},57465,e=>{"use strict";e.s(["ItemRewardMediaFragment",()=>a]);var n=e.i(528198),r=e.i(600028);let a=(0,n.graphql)("\n    fragment ItemRewardMedia on UserReward {\n      id\n      isGrandPrize\n      item {\n        ...ItemMedia\n        chain {\n          identifier\n        }\n      }\n    }\n  ",[r.ItemMediaFragment])},234761,e=>{"use strict";e.s(["SortRewardsByValue_itemFragment",()=>t,"SortRewardsByValue_tokenFragment",()=>s,"sortRewardsByValue",()=>l]);var n=e.i(528198),r=e.i(635341),a=e.i(465172);let t=(0,n.graphql)("\n  fragment SortRewardsByValue_item on UserReward {\n    __typename\n    id\n    item {\n      bestOffer {\n        pricePerItem {\n          usd\n        }\n      }\n    }\n  }\n"),s=(0,n.graphql)("\n  fragment SortRewardsByValue_token on UserTokenReward {\n    __typename\n    id\n    balance {\n      usdValue\n    }\n  }\n");function i(e){var n,i,l,d,u,o;if("UserTokenReward"===e.__typename){let n=(0,r.readFragment)(s,e);return(0,a.bn)(null!=(u=null==(d=n.balance)?void 0:d.usdValue)?u:0).toNumber()}let E=(0,r.readFragment)(t,e);return(0,a.bn)(null!=(o=null==(l=E.item)||null==(i=l.bestOffer)||null==(n=i.pricePerItem)?void 0:n.usd)?o:0).toNumber()}function l(e,n){return[...e.map(e=>({original:e,sortData:(0,r.readFragment)(t,e)})),...n.map(e=>({original:e,sortData:(0,r.readFragment)(s,e)}))].sort((e,n)=>i(e.sortData)-i(n.sortData)).map(e=>{let{original:n}=e;return n})}},279155,e=>{"use strict";e.s(["TokenRewardMediaFragment",()=>t]);var n=e.i(81810),r=e.i(528198),a=e.i(111908);let t=(0,r.graphql)("\n    fragment TokenRewardMedia on UserTokenReward {\n      id\n      balance {\n        usdValue\n        currency {\n          imageUrl\n          ...CurrencyLockup\n          metadata {\n            ...useCurrencyBannerMedia\n            ...useCurrencyBannerMediaFallback\n          }\n        }\n      }\n    }\n  ",[n.CurrencyLockupFragment,a.useCurrencyBannerMediaFragment,a.useCurrencyBannerMediaFallbackFragment])},186869,e=>{"use strict";e.s(["TreasureRewardMediaFragment",()=>n]);let n=(0,e.i(528198).graphql)("\n  fragment TreasureRewardMedia on Badge {\n    id\n    name\n    imageUrl\n    animationUrl\n  }\n")},356229,e=>{"use strict";e.s(["AVAILABLE_CHEST_LEVELS",()=>a,"STARS_PER_LEVEL",()=>t,"TOTAL_CHEST_LEVELS",()=>s,"generateChestIcons",()=>E,"getChestImage",()=>d,"getMainChestImage",()=>u,"getOpenChestImage",()=>o]);var n=e.i(575789),r=e.i(607172);let a=13,t=3,s=13,i=[r.CLOSED_CHEST_LEVEL_1,r.CLOSED_CHEST_LEVEL_2,r.CLOSED_CHEST_LEVEL_3,r.CLOSED_CHEST_LEVEL_4,r.CLOSED_CHEST_LEVEL_5,r.CLOSED_CHEST_LEVEL_6,r.CLOSED_CHEST_LEVEL_7,r.CLOSED_CHEST_LEVEL_8,r.CLOSED_CHEST_LEVEL_9,r.CLOSED_CHEST_LEVEL_10,r.CLOSED_CHEST_LEVEL_11,r.CLOSED_CHEST_LEVEL_12,r.CLOSED_CHEST_LEVEL_13],l=[r.OPEN_CHEST_LEVEL_1,r.OPEN_CHEST_LEVEL_2,r.OPEN_CHEST_LEVEL_3,r.OPEN_CHEST_LEVEL_4,r.OPEN_CHEST_LEVEL_5,r.OPEN_CHEST_LEVEL_6,r.OPEN_CHEST_LEVEL_7,r.OPEN_CHEST_LEVEL_8,r.OPEN_CHEST_LEVEL_9,r.OPEN_CHEST_LEVEL_10,r.OPEN_CHEST_LEVEL_11,r.OPEN_CHEST_LEVEL_12,r.OPEN_CHEST_LEVEL_13];function d(e){return e>a?r.MYSTERY_CHEST_LEVEL_1:i[Math.max(e-1,0)]}function u(e){return e>a?r.MYSTERY_CHEST_LEVEL_1:i[Math.max(e-1,0)]}function o(e){if(e>a)return r.MYSTERY_CHEST_LEVEL_1;let n=Math.max(0,Math.min(e-1,l.length-1));return l[n]}function E(e){return(0,n.range)(s).map(n=>{let r=n+1,t=r<e,s=r>a,i=d(r),l=0===e&&1===r?"active":r<e?"completed":r===e?"active":"locked";return{id:r,isUnlocked:t,image:i,isMystery:s,status:l}})}},138926,e=>{"use strict";e.s(["TreasureChestAlertModal",()=>T],138926);var n=e.i(705378),r=e.i(491150),a=e.i(194153),t=e.i(965523),s=e.i(972483),i=e.i(950293),l=e.i(625236),d=e.i(940704),u=e.i(595273),o=e.i(904663),E=e.i(389852),m=e.i(308641),_=e.i(249023),c=e.i(286419);let C=(0,u.create)()((0,_.persist)((0,c.mutative)((e,n)=>({dismissedChestIds:[],isDismissed:e=>n().dismissedChestIds.includes(e),dismiss:n=>{e(e=>{e.dismissedChestIds.includes(n)||e.dismissedChestIds.push(n)})},reset:()=>{e(e=>{e.dismissedChestIds=[]})}})),{name:"treasure-chest-alert-modal",partialize:e=>({dismissedChestIds:e.dismissedChestIds})})),T=(0,E.withSuspense)(()=>{var e,E;let _=(0,d.useTranslations)("TreasureChestOpenModal"),{isDismissed:c,dismiss:T}=(0,u.useStore)(C),{openableTreasureChest:h,hasRewards:L}=(0,m.useOpenableTreasureChests)(),g=null==h?void 0:h.id,R=null!=(E=null==h||null==(e=h.userProgress)?void 0:e.currentLevel)?E:0,p=h&&L&&!c(null!=g?g:"");return(0,n.jsx)(s.Modal,{content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.ModalBody,{children:(0,n.jsx)(t.FlexColumn,{className:"gap-6",children:(0,n.jsxs)(a.CenterAligned,{className:"gap-4",children:[(0,n.jsx)("div",{className:"flex h-[360px] w-[360px] items-center justify-center",children:(0,n.jsx)(o.RiveChest,{height:"100%",level:R,stateMachines:"CHEST",width:"100%"})}),(0,n.jsxs)(a.CenterAligned,{className:"gap-2",children:[(0,n.jsx)(l.TextHeading,{className:"text-center",size:"md",children:_("title")}),(0,n.jsx)(i.TextBody,{className:"text-center",color:"text-secondary",size:"sm",children:_("description")})]})]})})}),(0,n.jsx)(s.ModalFooter,{className:"flex-shrink-0 bg-bg-primary",children:(0,n.jsx)(r.Link,{className:"w-full",href:"/rewards",variant:"unstyled",children:(0,n.jsx)(s.ModalFooterButton,{className:"w-full",onClick:()=>g&&T(g),variant:"primary",children:_("cta")})})})]}),onOpenChange:e=>{!e&&g&&T(g)},open:p,size:"md",withCloseIcon:!0})})},751642,e=>{e.n(e.i(138926))},460568,e=>{e.v(n=>Promise.all(["static/chunks/bfa7e6a24a3c7dd2.js","static/chunks/6343cf83e4789f61.js"].map(n=>e.l(n))).then(()=>n(356647)))}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c098ff01-78b0-55a4-916d-b628c67f2ddd")}catch(e){}}();
//# debugId=c098ff01-78b0-55a4-916d-b628c67f2ddd
