(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,685236,e=>{"use strict";function t(e,t){if(!Number.isInteger(t)||t<=0)throw Error("Size must be an integer greater than zero.");let i=Math.ceil(e.length/t),n=Array(i);for(let r=0;r<i;r++){let i=r*t,a=i+t;n[r]=e.slice(i,a)}return n}e.s(["chunk",()=>t])},132553,439870,e=>{"use strict";e.s(["CurrencyPrice",()=>u,"CurrencyPriceDisplay",()=>c],132553);var t=e.i(705378),i=e.i(590268),n=e.i(635341);e.i(257620);var r=e.i(535374),a=e.i(738480),s=e.i(967593),o=e.i(465172);e.s(["CurrencyPriceFragment",()=>l],439870);let l=(0,e.i(528198).graphql)("\n  fragment CurrencyPrice on CurrencyV2 {\n    usdPrice\n  }\n");function c(e){let n,l,c,u,d=(0,i.c)(13),{value:m,custom:f,stableSignificantDigits:v,withFullValueTooltip:h}=e,y=void 0!==v&&v,p=(0,r.useNumberFormatter)();d[0]!==f||d[1]!==y||d[2]!==m?(n=y?{...function(e){let t=e&&(0,o.bn)(e).gt(1),i={roundingPriority:"lessPrecision"};return t?(i.minimumSignificantDigits=3,i.maximumFractionDigits=2,i.minimumFractionDigits=2):i.minimumSignificantDigits=4,i}(m),...f}:f,d[0]=f,d[1]=y,d[2]=m,d[3]=n):n=d[3];let g=n,T=p(m,{display:"usd-compact",custom:g}),S=p(m,{display:"usd-full"});d[4]!==m?(l=(0,t.jsx)(a.NumberDisplay,{display:"usd-full",value:m}),d[4]=m,d[5]=l):l=d[5];let k=!(void 0===h||h)||T===S;return d[6]!==g||d[7]!==m?(c=(0,t.jsx)(a.NumberDisplay,{custom:g,display:"usd-compact",value:m}),d[6]=g,d[7]=m,d[8]=c):c=d[8],d[9]!==l||d[10]!==k||d[11]!==c?(u=(0,t.jsx)(s.Tooltip,{content:l,disabled:k,children:c}),d[9]=l,d[10]=k,d[11]=c,d[12]=u):u=d[12],u}function u(e){let r,a,s,o,u=(0,i.c)(8);u[0]!==e?({currency:r,...a}=e,u[0]=e,u[1]=r,u[2]=a):(r=u[1],a=u[2]),u[3]!==r?(s=(0,n.readFragment)(l,r),u[3]=r,u[4]=s):s=u[4];let d=Number(s.usdPrice);return u[5]!==a||u[6]!==d?(o=(0,t.jsx)(c,{value:d,...a}),u[5]=a,u[6]=d,u[7]=o):o=u[7],o}},652565,e=>{"use strict";e.s([]),e.i(132553)},116889,972513,e=>{"use strict";e.s(["CurrencyChartColorProvider",()=>f,"useCurrencyChartColor",()=>v],116889);var t=e.i(705378),i=e.i(590268),n=e.i(635341),r=e.i(529783),a=e.i(150127),s=e.i(35720),o=e.i(969498),l=e.i(314346);e.s(["selectBestChartColor",()=>d],972513);var c=e.i(94798);let u="#FFFFFF";function d(e){if(!e.length)return;let t=e.map(e=>{let t=(0,c.default)(e),i=c.default.contrast(e,u),n=e;i<2.5&&(n=t.darken(1).saturate(.5).hex());let r=c.default.contrast(n,u),a=c.default.contrast(n,"#000000"),s=(0,c.default)(n).get("hsl.s");return{color:n,originalColor:e,contrastWithBlack:a,contrastWithWhite:r,saturation:s}}).filter(e=>e.contrastWithBlack>=3.5&&e.contrastWithWhite>=2.5&&e.saturation>=.3);if(0!==t.length)return t[0].color}let m=(0,o.createContext)(null);function f(e){let c,u,f,v,h,y=(0,i.c)(11),{currency:p,children:g}=e;y[0]!==p?(c=(0,n.readFragment)(l.CurrencyChartColorFragment,p),y[0]=p,y[1]=c):c=y[1];let T=c,[S,k]=(0,o.useState)();y[2]!==T.imageUrl?(u=async function(){let e=await (0,r.extractProminentColors)(T.imageUrl);if(!e)return void k(void 0);k(d(e))},y[2]=T.imageUrl,y[3]=u):u=y[3];let x=u;return y[4]!==x?(f=()=>{x()},y[4]=x,y[5]=f):f=y[5],(0,a.useMountEffect)(f),y[6]!==x?(v=()=>{x()},y[6]=x,y[7]=v):v=y[7],(0,s.useOnChange)(T.imageUrl,v),y[8]!==g||y[9]!==S?(h=(0,t.jsx)(m.Provider,{value:S,children:g}),y[8]=g,y[9]=S,y[10]=h):h=y[10],h}function v(){return(0,o.useContext)(m)}},665958,e=>{"use strict";e.s(["SwapRefetchProvider",()=>a,"useSwapRefetch",()=>o]);var t=e.i(705378),i=e.i(590268),n=e.i(969498);let r=(0,n.createContext)(void 0);function a(e){let a,o,l,c,u,d,m,f,v=(0,i.c)(9),{children:h}=e;v[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,v[0]=a):a=v[0];let y=(0,n.useRef)(a);v[1]===Symbol.for("react.memo_cache_sentinel")?(o=new Set,v[1]=o):o=v[1];let p=(0,n.useRef)(o);v[2]===Symbol.for("react.memo_cache_sentinel")?(l=e=>(y.current.add(e),()=>{y.current.delete(e)}),v[2]=l):l=v[2];let g=l;v[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{y.current.forEach(s)},v[3]=c):c=v[3];let T=c;v[4]===Symbol.for("react.memo_cache_sentinel")?(u=e=>(p.current.add(e),()=>{p.current.delete(e)}),v[4]=u):u=v[4];let S=u;v[5]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{p.current.forEach(t=>t(e))},v[5]=d):d=v[5];let k=d;return v[6]===Symbol.for("react.memo_cache_sentinel")?(m={registerRefetch:g,triggerRefetch:T,registerOptimisticActivityHandler:S,triggerOptimisticActivity:k},v[6]=m):m=v[6],v[7]!==h?(f=(0,t.jsx)(r.Provider,{value:m,children:h}),v[7]=h,v[8]=f):f=v[8],f}function s(e){return e()}function o(){let e=(0,n.useContext)(r);if(!e)throw Error("useSwapRefetch must be used within SwapRefetchProvider");return e}},512771,e=>{"use strict";e.s(["useSenderQueryParam",()=>r]);var t=e.i(590268),i=e.i(384873),n=e.i(649386);function r(){let e,r,a,s=(0,t.c)(6);s[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.parseAsString.withDefault(""),s[0]=e):e=s[0];let[o,l]=(0,i.useQueryState)(n.QUERY_PARAM_KEYS.sender,e);return s[1]!==l?(r=e=>{l(null!=e?e:null)},s[1]=l,s[2]=r):r=s[2],s[3]!==o||s[4]!==r?(a={sender:o,setSender:r},s[3]=o,s[4]=r,s[5]=a):a=s[5],a}},584879,e=>{"use strict";e.s(["TokenSwapPriceFragment",()=>t]);let t=(0,e.i(528198).graphql)("\n    fragment TokenSwapPrice on TokenSwapActivity {\n      fromToken {\n        usd\n        token {\n          unit\n        }\n      }\n      toToken {\n        usd\n        token {\n          unit\n        }\n      }\n    }\n  ",[])},533040,e=>{"use strict";e.s(["TokenSwapPrice",()=>o]);var t=e.i(705378),i=e.i(590268),n=e.i(635341),r=e.i(465172);e.i(652565);var a=e.i(132553),s=e.i(584879);function o(e){let o,l,c,u,d=(0,i.c)(9),{activity:m,type:f}=e;if(d[0]!==m||d[1]!==f){let e=(0,n.readFragment)(s.TokenSwapPriceFragment,m),t="sell"===f?e.fromToken:"buy"===f?e.toToken:e.fromToken,i=(0,r.bn)(t.usd).dividedBy(t.token.unit);o=a.CurrencyPriceDisplay,l=!0,c=i.toNumber(),d[0]=m,d[1]=f,d[2]=o,d[3]=l,d[4]=c}else o=d[2],l=d[3],c=d[4];return d[5]!==o||d[6]!==l||d[7]!==c?(u=(0,t.jsx)(o,{stableSignificantDigits:l,value:c,withFullValueTooltip:!1}),d[5]=o,d[6]=l,d[7]=c,d[8]=u):u=d[8],u}},846762,e=>{"use strict";e.s(["TokenSwapRouteFragment",()=>i]);var t=e.i(190627);let i=(0,e.i(528198).graphql)("\n    fragment TokenSwapRoute on TokenSwapActivity {\n      fromToken {\n        ...TokenPrice\n      }\n      toToken {\n        ...TokenPrice\n      }\n    }\n  ",[t.TokenPriceFragment])},439548,577608,e=>{"use strict";e.s([],439548),e.s(["TokenSwapRoute",()=>l],577608);var t=e.i(705378),i=e.i(590268),n=e.i(47667),r=e.i(635341),a=e.i(254842),s=e.i(257721),o=e.i(846762);let l=e=>{let l,c,u,d,m,f=(0,i.c)(10),{activity:v}=e;f[0]!==v?(l=(0,r.readFragment)(o.TokenSwapRouteFragment,v),f[0]=v,f[1]=l):l=f[1];let h=l;return f[2]!==h.fromToken?(c=(0,t.jsx)(n.TokenPrice,{currency:"crypto",display:"compact",price:h.fromToken}),f[2]=h.fromToken,f[3]=c):c=f[3],f[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(s.ArrowRightAlt,{size:20}),f[4]=u):u=f[4],f[5]!==h.toToken?(d=(0,t.jsx)(n.TokenPrice,{currency:"crypto",display:"compact",price:h.toToken}),f[5]=h.toToken,f[6]=d):d=f[6],f[7]!==c||f[8]!==d?(m=(0,t.jsxs)(a.Flex,{className:"items-center gap-2",children:[c,u,d]}),f[7]=c,f[8]=d,f[9]=m):m=f[9],m}},257721,e=>{"use strict";e.s(["ArrowRightAlt",()=>a]);var t=e.i(705378),i=e.i(590268),n=e.i(790621),r=e.i(437153);function a(e){let a,s,o,l,c,u,d,m,f=(0,i.c)(15);f[0]!==e?({size:o,fill:l,fillAttribute:c,className:a,...s}=e,f[0]=e,f[1]=a,f[2]=s,f[3]=o,f[4]=l,f[5]=c):(a=f[1],s=f[2],o=f[3],l=f[4],c=f[5]);let v=void 0===o?24:o,h=void 0===l?"current":l,y=void 0===c?"currentColor":c;return f[6]!==a||f[7]!==h?(u=(0,r.classNames)((0,n.fillVariants)({fill:h}),a),f[6]=a,f[7]=h,f[8]=u):u=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("path",{d:"m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"}),f[9]=d):d=f[9],f[10]!==y||f[11]!==s||f[12]!==v||f[13]!==u?(m=(0,t.jsx)("svg",{"aria-label":"Arrow Right Alt",className:u,fill:y,height:v,role:"img",viewBox:"0 -960 960 960",width:v,xmlns:"http://www.w3.org/2000/svg",...s,children:d}),f[10]=y,f[11]=s,f[12]=v,f[13]=u,f[14]=m):m=f[14],m}},756366,e=>{"use strict";e.s(["UsdPrice",()=>u,"UsdPriceDisplay",()=>c]);var t=e.i(705378),i=e.i(590268),n=e.i(653365),r=e.i(635341),a=e.i(149431),s=e.i(738480);e.i(232947);var o=e.i(859898),l=e.i(583952);function c(e){let r,o,l=(0,i.c)(11),{conversion:c,currency:u,unitPrice:d,usdPrice:m,multiplier:f,animated:v,display:h,custom:y}=e,p=void 0===c?"current":c,g=void 0===f?1:f,T=void 0===h?"usd":h,S=v?a.AnimatedNumber:s.NumberDisplay;l[0]!==p||l[1]!==u||l[2]!==g||l[3]!==d||l[4]!==m?(r={currency:u,unitPrice:d,usdPrice:m,conversion:p,multiplier:g},l[0]=p,l[1]=u,l[2]=g,l[3]=d,l[4]=m,l[5]=r):r=l[5];let k=(0,n.useUsdPriceValue)(r);return l[6]!==S||l[7]!==y||l[8]!==T||l[9]!==k?(o=(0,t.jsx)(S,{custom:y,display:T,value:k}),l[6]=S,l[7]=y,l[8]=T,l[9]=k,l[10]=o):o=l[10],o}function u(e){let n,u,d,m,f=(0,i.c)(15),{price:v,conversion:h,multiplier:y,animated:p,display:g,custom:T}=e,S=void 0===y?1:y,k=void 0===g?"usd":g;if(f[0]!==p||f[1]!==v){d=Symbol.for("react.early_return_sentinel");e:{n=(0,r.readFragment)(l.UsdPriceFragment,v);let e=p?a.AnimatedNumber:s.NumberDisplay;if(!n){let i;f[5]!==e?(i=(0,t.jsx)(e,{display:"usd",value:null}),f[5]=e,f[6]=i):i=f[6],d=i;break e}u=(0,o.getCurrencyIdentifier)(n.token)}f[0]=p,f[1]=v,f[2]=n,f[3]=u,f[4]=d}else n=f[2],u=f[3],d=f[4];if(d!==Symbol.for("react.early_return_sentinel"))return d;let x=u;return f[7]!==h||f[8]!==T||f[9]!==k||f[10]!==S||f[11]!==n.token.unit||f[12]!==n.usd||f[13]!==x?(m=(0,t.jsx)(c,{conversion:h,currency:x,custom:T,display:k,multiplier:S,unitPrice:n.token.unit,usdPrice:n.usd}),f[7]=h,f[8]=T,f[9]=k,f[10]=S,f[11]=n.token.unit,f[12]=n.usd,f[13]=x,f[14]=m):m=f[14],m}},668813,e=>{"use strict";e.s(["NativePriceFragment",()=>r]);var t=e.i(528198);e.i(232947);var i=e.i(859898),n=e.i(583952);let r=(0,t.graphql)("\n    fragment NativePrice on Price {\n      ...UsdPrice\n      token {\n        unit\n        contractAddress\n        ...currencyIdentifier\n      }\n      native {\n        symbol\n        unit\n        contractAddress\n        ...currencyIdentifier\n      }\n    }\n  ",[n.UsdPriceFragment,i.currencyIdentifierFragment])},236104,e=>{"use strict";e.s(["NativePrice",()=>d]);var t=e.i(705378),i=e.i(590268),n=e.i(847720),r=e.i(635341),a=e.i(252485),s=e.i(738480),o=e.i(60330);e.i(232947);var l=e.i(859898),c=e.i(668813),u=e.i(756366);function d(e){let d=(0,i.c)(5),{price:m,display:f,conversion:v,multiplier:h,currency:y}=e,p=void 0===f?"compact":f,g=void 0===v?"current":v,T=void 0===h?1:h,S=(0,r.readFragment)(c.NativePriceFragment,m),{currency:k}=(0,a.useCurrency)(),x=null!=y?y:k,{getNativePrice:b}=(0,n.useCurrencies)();switch(x){case"crypto":var C;if(!S){let e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(s.NumberDisplay,{}),d[0]=e):e=d[0],e}if("historical"===g)return(0,t.jsx)(s.NumberDisplay,{display:p,suffix:S.native.symbol,value:S.native.unit*T});return(0,t.jsx)(s.NumberDisplay,{display:p,suffix:S.native.symbol,value:null!=(C=b((0,l.getCurrencyIdentifier)(S.token),(0,l.getCurrencyIdentifier)(S.native),S.token.unit*T))?C:S.native.unit*T});case"usd":{let e;return d[1]!==g||d[2]!==T||d[3]!==S?(e=(0,t.jsx)(u.UsdPrice,{conversion:g,multiplier:T,price:S}),d[1]=g,d[2]=T,d[3]=S,d[4]=e):e=d[4],e}default:throw new o.UnreachableCaseError(x)}}},231538,797614,740100,144551,879658,186083,e=>{"use strict";e.s(["useCurrencyPriceUpdateSubscription",()=>l],231538);var t=e.i(590268),i=e.i(956309),n=e.i(528198),r=e.i(465172),a=e.i(80839);e.i(402819);var s=e.i(916744);let o=(0,n.graphql)("\n  subscription useCurrencyPriceUpdateGlobalTokenActivitySubscription(\n    $contractIdentifiers: [ContractIdentifierInput!]\n  ) {\n    globalTokenActivity(tokens: $contractIdentifiers) {\n      timestamp\n      fromToken {\n        usd\n        token {\n          unit\n          contractAddress\n          chain {\n            identifier\n          }\n        }\n      }\n      toToken {\n        usd\n        token {\n          unit\n          contractAddress\n          chain {\n            identifier\n          }\n        }\n      }\n    }\n  }\n");function l(e,n){let l,c,u,d,m,f=(0,t.c)(12);e:{let t;if(!e||0===e.length){l=null;break e}f[0]!==e?(t=(0,a.keyBy)(e,i.getCurrencyKey),f[0]=e,f[1]=t):t=f[1],l=t}let v=l;if(f[2]!==e){var h;c=null!=(h=null==e?void 0:e.map(i.currencyToContractIdentifierInput))?h:[],f[2]=e,f[3]=c}else c=f[3];let y=c;f[4]!==y?(u={contractIdentifiers:y},f[4]=y,f[5]=u):u=f[5];let p=0===y.length;f[6]!==u||f[7]!==p?(d={query:o,variables:u,pause:p,pauseOnInactivity:!1},f[6]=u,f[7]=p,f[8]=d):d=f[8],f[9]!==v||f[10]!==n?(m=e=>{let t=e.globalTokenActivity;for(let e of[t.fromToken,t.toToken]){let a={contractAddress:e.token.contractAddress,chainIdentifier:e.token.chain.identifier};if(!(null==v?void 0:v[(0,i.getCurrencyKey)(a)])||0===e.token.unit)continue;let s=(0,r.bn)(e.usd);s.isLessThan(1)||n({value:(0,r.bn)(e.usd).dividedBy(e.token.unit),timestamp:t.timestamp,volume:s,currencyIdentifier:a})}},f[9]=v,f[10]=n,f[11]=m):m=f[11],(0,s.useSubscription)(d,m)}e.s(["useCurrencyVendorPriceSubscription",()=>d],797614);var c=e.i(969498);let u=(0,n.graphql)("\n  subscription useCurrencyVendorPriceSubscription(\n    $currency: ContractIdentifierInput!\n  ) {\n    currencyV2(currency: $currency) {\n      usdPrice\n    }\n  }\n");function d(e,i){let n,a,o,l,d,m,f=(0,t.c)(13),v=(0,c.useRef)(null);f[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v.current=null},f[0]=n):n=f[0];let h=null==e?void 0:e.address,y=null==e?void 0:e.chain;f[1]!==h||f[2]!==y?(a=[h,y],f[1]=h,f[2]=y,f[3]=a):a=f[3],(0,c.useEffect)(n,a),f[4]!==e?(o=e||{address:"",chain:""},f[4]=e,f[5]=o):o=f[5],f[6]!==o?(l={currency:o},f[6]=o,f[7]=l):l=f[7];let p=l,g=!e;f[8]!==g||f[9]!==p?(d={query:u,variables:p,pause:g},f[8]=g,f[9]=p,f[10]=d):d=f[10],f[11]!==i?(m=e=>{let t=e.currencyV2;(null==t?void 0:t.usdPrice)&&v.current!==t.usdPrice&&(v.current=t.usdPrice,i({value:(0,r.bn)(t.usdPrice),timestamp:new Date().toISOString()}))},f[11]=i,f[12]=m):m=f[12],(0,s.useSubscription)(d,m)}e.s(["CurrencyDisclaimer",()=>k,"isInternalDataTimeframe",()=>S],740100);var m=e.i(705378),f=e.i(491150),v=e.i(508022),h=e.i(437153),y=e.i(965523),p=e.i(346260),g=e.i(950293),T=e.i(940704);let S=e=>["ONE_MINUTE","FIVE_MINUTE","FIFTEEN_MINUTE","ONE_HOUR","ONE_DAY","SEVEN_DAYS","THIRTY_DAYS"].includes(e);function k(e){let i,n,r,a=(0,t.c)(8),{timeframe:s,chainIdentifier:o,chartVariant:l,isTradingViewChartEnabled:c}=e,u=(0,T.useTranslations)("CurrencyDisclaimer"),d=!S(s)||"polygon"===o,f="CANDLESTICKS"===l&&!c;if(!(d||f))return null;a[0]!==d||a[1]!==f?(i=()=>d&&f?"poweredByCoingeckoAndTradingView":f?"poweredByTradingView":"poweredByCoingecko",a[0]=d,a[1]=f,a[2]=i):i=a[2];let v=i;return a[3]!==v||a[4]!==u?(n=u.rich(v(),{coingecko:x("https://www.coingecko.com/en/api"),tradingview:x("https://www.tradingview.com")}),a[3]=v,a[4]=u,a[5]=n):n=a[5],a[6]!==n?(r=(0,m.jsx)(y.FlexColumn,{className:"gap-3 pr-1",children:(0,m.jsx)(g.TextBody,{color:"text-secondary",size:"xs",children:n})}),a[6]=n,a[7]=r):r=a[7],r}let x=e=>t=>(0,m.jsx)(f.Link,{href:e,variant:"unstyled",children:(0,m.jsx)(v.Block,{className:(0,h.classNames)("inline",(0,p.interactiveVariants)({text:"primary"})),children:t})});e.s(["CurrencyChartAnnotationsProvider",()=>ec,"useCurrencyChartAnnotations",()=>ed],144551);var b=e.i(512771);e.i(500598);var C=e.i(207225),w=e.i(682388),A=e.i(635341),P=e.i(333799),N=e.i(21939),j=e.i(747998),I=e.i(47667),_=e.i(147850);e.i(257620);var F=e.i(922364),D=e.i(155757),R=e.i(502732),E=e.i(194153),B=e.i(39771),z=e.i(999258),M=e.i(258343),U=e.i(967593),O=e.i(790621);let V=e=>{let i,n,r,a,s,o,l,c,u=(0,t.c)(15);u[0]!==e?({size:r,className:i,fill:a,fillAttribute:s,...n}=e,u[0]=e,u[1]=i,u[2]=n,u[3]=r,u[4]=a,u[5]=s):(i=u[1],n=u[2],r=u[3],a=u[4],s=u[5]);let d=void 0===r?24:r,f=void 0===a?"current":a,v=void 0===s?"currentColor":s;return u[6]!==i||u[7]!==f?(o=(0,h.classNames)((0,O.fillVariants)({fill:f}),i),u[6]=i,u[7]=f,u[8]=o):o=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("path",{d:"M560-280 360-480l200-200v400Z"}),u[9]=l):l=u[9],u[10]!==v||u[11]!==n||u[12]!==d||u[13]!==o?(c=(0,m.jsx)("svg",{"aria-label":"Arrow Left",className:o,fill:v,height:d,role:"img",viewBox:"0 -960 960 960",width:d,xmlns:"http://www.w3.org/2000/svg",...n,children:l}),u[10]=v,u[11]=n,u[12]=d,u[13]=o,u[14]=c):c=u[14],c},q=e=>{let i,n,r,a,s,o,l,c,u=(0,t.c)(15);u[0]!==e?({size:r,className:i,fill:a,fillAttribute:s,...n}=e,u[0]=e,u[1]=i,u[2]=n,u[3]=r,u[4]=a,u[5]=s):(i=u[1],n=u[2],r=u[3],a=u[4],s=u[5]);let d=void 0===r?24:r,f=void 0===a?"current":a,v=void 0===s?"currentColor":s;return u[6]!==i||u[7]!==f?(o=(0,h.classNames)((0,O.fillVariants)({fill:f}),i),u[6]=i,u[7]=f,u[8]=o):o=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("path",{d:"M400-280v-400l200 200-200 200Z"}),u[9]=l):l=u[9],u[10]!==v||u[11]!==n||u[12]!==d||u[13]!==o?(c=(0,m.jsx)("svg",{"aria-label":"Arrow Right",className:o,fill:v,height:d,role:"img",viewBox:"0 -960 960 960",width:d,xmlns:"http://www.w3.org/2000/svg",...n,children:l}),u[10]=v,u[11]=n,u[12]=d,u[13]=o,u[14]=c):c=u[14],c};var L=e.i(236104),H=e.i(756366),$=e.i(533040);e.i(439548);var Y=e.i(577608),Q=e.i(439946),K=e.i(646426),W=e.i(190627),G=e.i(668813),X=e.i(583952),Z=e.i(584879),J=e.i(846762);let ee=(0,n.graphql)("\n  fragment TokenSwapActivityAnnotation on TokenSwapActivity {\n    timestamp\n    transactionHash\n    swapProtocol {\n      identifier\n    }\n    fromToken {\n      usd\n      token {\n        unit\n        address\n        symbol\n        chain {\n          identifier\n        }\n      }\n      ...TokenPrice\n      ...UsdPrice\n      ...NativePrice\n    }\n    toToken {\n      usd\n      token {\n        unit\n        address\n        symbol\n        chain {\n          identifier\n        }\n      }\n      ...TokenPrice\n      ...UsdPrice\n      ...NativePrice\n    }\n    sender {\n      ...AccountLockup\n    }\n    ...TokenSwapPrice\n    ...TokenSwapRoute\n  }\n",[K.AccountLockupFragment,W.TokenPriceFragment,Z.TokenSwapPriceFragment,X.UsdPriceFragment,G.NativePriceFragment,J.TokenSwapRouteFragment]);function et(e){var n;let r,a,s,o,l,u,d,f,v,p,S,k,x,b,w,A,P,N,O,K,W,G,X,Z,J,ee,et,en,er,ea,es,eo,el,ec,eu=(0,t.c)(99),{activities:ed,currencies:em}=e,ef=(0,T.useTranslations)("TokenSwapActivityAnnotation"),ev=ed.map(ei),eh=(0,C.useAddress)(),ey=(0,F.useDateTimeFormatter)(),{getChain:ep}=(0,_.useChains)(),{getLogo:eg}=(0,Q.useSwapProtocols)(),[eT,eS]=(0,c.useState)(0),[ek,ex]=(0,c.useState)(!1),eb=ev[eT],eC=[eb.fromToken,eb.toToken].find(e=>em.some(t=>(0,i.areCurrenciesEqual)(t,{contractAddress:e.token.address,chainIdentifier:e.token.chain.identifier}))),ew=em.some(e=>(0,i.areCurrenciesEqual)(e,{contractAddress:eb.fromToken.token.address,chainIdentifier:eb.fromToken.token.chain.identifier}))?"sell":"buy";if(!eC)return null;let eA=ep(eC.token.chain.identifier),eP=null==eA||null==(n=eA.nativeCurrency)?void 0:n.symbol,eN=U.Tooltip,ej=y.FlexColumn,eI=eb.swapProtocol&&(0,m.jsx)(D.Avatar,{size:32,...eg(eb.swapProtocol.identifier)});eu[0]!==ef||eu[1]!==ew?(r=ef("buy"===ew?"buy":"sell"),eu[0]=ef,eu[1]=ew,eu[2]=r):r=eu[2],eu[3]!==r?(a=(0,m.jsx)(g.TextBody,{children:r}),eu[3]=r,eu[4]=a):a=eu[4],eu[5]!==eI||eu[6]!==a?(s=(0,m.jsxs)(B.FlexCenter,{className:"gap-3",children:[eI,a]}),eu[5]=eI,eu[6]=a,eu[7]=s):s=eu[7];let e_=ev.length>1&&(0,m.jsxs)(B.FlexCenter,{className:"gap-2",children:[(0,m.jsx)(R.Button,{disabled:0===eT,icon:V,onClick:()=>eS(eT-1),size:"sm",variant:"secondary"}),(0,m.jsx)(g.TextBody,{children:ef("activityCount",{count:eT+1,total:ev.length})}),(0,m.jsx)(R.Button,{disabled:eT===ev.length-1,icon:q,onClick:()=>eS(eT+1),size:"sm",variant:"secondary"})]});eu[8]!==s||eu[9]!==e_?(o=(0,m.jsxs)(M.SpaceBetween,{className:"justify-between",children:[s,e_]}),eu[8]=s,eu[9]=e_,eu[10]=o):o=eu[10],eu[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(z.Separator,{}),eu[11]=l):l=eu[11],eu[12]!==eb?(u=(0,m.jsx)(g.TextBody,{color:"text-secondary",size:"sm",children:(0,m.jsx)(Y.TokenSwapRoute,{activity:eb})}),eu[12]=eb,eu[13]=u):u=eu[13];let eF=y.FlexColumn;eu[14]!==ef?(d=ef("price"),eu[14]=ef,eu[15]=d):d=eu[15],eu[16]!==d?(f=(0,m.jsxs)(g.TextBody,{color:"text-secondary",children:[d,":"]}),eu[16]=d,eu[17]=f):f=eu[17],eu[18]!==eb||eu[19]!==ew?(v=(0,m.jsx)(g.TextBody,{weight:"semibold",children:(0,m.jsx)($.TokenSwapPrice,{activity:eb,type:ew})}),eu[18]=eb,eu[19]=ew,eu[20]=v):v=eu[20],eu[21]!==f||eu[22]!==v?(p=(0,m.jsxs)(B.FlexCenter,{className:"gap-1",children:[f,v]}),eu[21]=f,eu[22]=v,eu[23]=p):p=eu[23],eu[24]!==ef?(S=ef("amount"),eu[24]=ef,eu[25]=S):S=eu[25],eu[26]!==S?(k=(0,m.jsxs)(g.TextBody,{color:"text-secondary",children:[S,":"]}),eu[26]=S,eu[27]=k):k=eu[27];let eD="buy"===ew?"success-1":"error-1";eu[28]!==eC||eu[29]!==eD?(x=(0,m.jsx)(g.TextBody,{weight:"semibold",children:(0,m.jsx)(I.TokenPrice,{bounded:!1,display:"quantity",price:eC,valueColor:eD})}),eu[28]=eC,eu[29]=eD,eu[30]=x):x=eu[30],eu[31]!==k||eu[32]!==x?(b=(0,m.jsxs)(B.FlexCenter,{className:"gap-1",children:[k,x]}),eu[31]=k,eu[32]=x,eu[33]=b):b=eu[33],eu[34]!==ef?(w=ef("totalUsd"),eu[34]=ef,eu[35]=w):w=eu[35],eu[36]!==w?(A=(0,m.jsxs)(g.TextBody,{color:"text-secondary",children:[w,":"]}),eu[36]=w,eu[37]=A):A=eu[37];let eR="buy"===ew?"success-1":"error-1";eu[38]!==eC?(P=(0,m.jsx)(H.UsdPrice,{price:eC}),eu[38]=eC,eu[39]=P):P=eu[39],eu[40]!==eR||eu[41]!==P?(N=(0,m.jsx)(g.TextBody,{color:eR,weight:"semibold",children:P}),eu[40]=eR,eu[41]=P,eu[42]=N):N=eu[42],eu[43]!==A||eu[44]!==N?(O=(0,m.jsxs)(B.FlexCenter,{className:"gap-1",children:[A,N]}),eu[43]=A,eu[44]=N,eu[45]=O):O=eu[45];let eE=B.FlexCenter,eB=g.TextBody,ez=ef("totalNative",{symbol:eP||""});eu[46]!==eB||eu[47]!==ez?(K=(0,m.jsxs)(eB,{color:"text-secondary",children:[ez,":"]}),eu[46]=eB,eu[47]=ez,eu[48]=K):K=eu[48],eu[49]!==eC?(W=(0,m.jsx)(g.TextBody,{weight:"semibold",children:(0,m.jsx)(L.NativePrice,{currency:"crypto",price:eC})}),eu[49]=eC,eu[50]=W):W=eu[50],eu[51]!==eE||eu[52]!==K||eu[53]!==W?(G=(0,m.jsxs)(eE,{className:"gap-1",children:[K,W]}),eu[51]=eE,eu[52]=K,eu[53]=W,eu[54]=G):G=eu[54],eu[55]!==eF||eu[56]!==p||eu[57]!==b||eu[58]!==O||eu[59]!==G?(X=(0,m.jsxs)(eF,{className:"gap-1",children:[p,b,O,G]}),eu[55]=eF,eu[56]=p,eu[57]=b,eu[58]=O,eu[59]=G,eu[60]=X):X=eu[60],eu[61]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,m.jsx)(z.Separator,{}),eu[61]=Z):Z=eu[61],eu[62]!==eb.timestamp||eu[63]!==ey?(J=ey(new Date(eb.timestamp),{display:"datetime"}),eu[62]=eb.timestamp,eu[63]=ey,eu[64]=J):J=eu[64],eu[65]!==J?(ee=(0,m.jsx)(g.TextBody,{color:"text-secondary",children:J}),eu[65]=J,eu[66]=ee):ee=eu[66],eu[67]!==ej||eu[68]!==X||eu[69]!==ee||eu[70]!==o||eu[71]!==l||eu[72]!==u?(et=(0,m.jsxs)(ej,{className:"min-w-[240px] gap-3 px-1 py-2",children:[o,l,u,X,Z,ee]}),eu[67]=ej,eu[68]=X,eu[69]=ee,eu[70]=o,eu[71]=l,eu[72]=u,eu[73]=et):et=eu[73];let eM="buy"===ew,eU="sell"===ew;return eu[74]!==ek||eu[75]!==eM||eu[76]!==eU?(en=(0,h.classNames)("pointer-events-none absolute inset-0 rounded-full",{"animate-[ping_1500ms_ease-out_infinite]":ek,"bg-success-1":eM,"bg-error-1":eU}),eu[74]=ek,eu[75]=eM,eu[76]=eU,eu[77]=en):en=eu[77],eu[78]!==en?(er=(0,m.jsx)("span",{className:en}),eu[78]=en,eu[79]=er):er=eu[79],eu[80]!==ek?(ea=(0,h.classNames)("relative transition-transform duration-200",{"scale-105":ek}),eu[80]=ek,eu[81]=ea):ea=eu[81],eu[82]!==ev[0]||eu[83]!==ev.length||eu[84]!==eh||eu[85]!==ew?(es=1===ev.length?(0,m.jsx)(j.AccountLockup,{account:ev[0].sender,connectedAddress:null!=eh?eh:null,children:(0,m.jsx)(j.AccountLockupAvatar,{size:20})}):(0,m.jsx)(E.CenterAligned,{className:(0,h.classNames)("size-5 rounded-full bg-bg-primary",{"bg-success-2":"buy"===ew,"bg-error-2":"sell"===ew}),children:(0,m.jsx)(g.TextBody,{className:"leading-5",size:"sm",weight:"semibold",children:ev.length})}),eu[82]=ev[0],eu[83]=ev.length,eu[84]=eh,eu[85]=ew,eu[86]=es):es=eu[86],eu[87]!==ea||eu[88]!==es?(eo=(0,m.jsx)("div",{className:ea,children:es}),eu[87]=ea,eu[88]=es,eu[89]=eo):eo=eu[89],eu[90]!==er||eu[91]!==eo?(el=(0,m.jsxs)(E.CenterAligned,{className:"relative size-[26px]",children:[er,eo]}),eu[90]=er,eu[91]=eo,eu[92]=el):el=eu[92],eu[93]!==eN||eu[94]!==ek||eu[95]!==ex||eu[96]!==et||eu[97]!==el?(ec=(0,m.jsx)(eN,{content:et,onOpenChange:ex,open:ek,children:el}),eu[93]=eN,eu[94]=ek,eu[95]=ex,eu[96]=et,eu[97]=el,eu[98]=ec):ec=eu[98],ec}function ei(e){return(0,A.readFragment)(ee,e)}let en=(0,n.graphql)("\n  fragment useTokenSwapActivityAnnotations on TokenSwapActivity {\n    id\n    timestamp\n    transactionHash\n    fromToken {\n      usd\n      token {\n        unit\n        address\n        chain {\n          identifier\n        }\n      }\n    }\n    toToken {\n      usd\n      token {\n        unit\n        address\n        chain {\n          identifier\n        }\n      }\n    }\n    ...TokenSwapActivityAnnotation\n  }\n",[ee]),er=(0,n.graphql)("\n  query TokenSwapActivityAnnotationsQuery($tokens: [ContractIdentifierInput!], $filter: GlobalTokenActivityFilterInput!) {\n    globalTokenActivity(tokens: $tokens, filter: $filter) {\n      items {\n        id\n        ...useTokenSwapActivityAnnotations\n      }\n      nextPageCursor\n    }\n  }\n",[en]),ea=(0,n.graphql)("\n  subscription TokenSwapActivityAnnotationsSubscription($tokens: [ContractIdentifierInput!], $filter: GlobalTokenActivityFilterInput!) {\n    globalTokenActivity(tokens: $tokens, filter: $filter) {\n      id\n      ...useTokenSwapActivityAnnotations\n    }\n  }\n",[en]),es={suspense:!1};var eo=e.i(665958);let el=(0,c.createContext)({annotations:[],rawActivities:[]});function ec(e){let n,a,o,l,u,d,f,v,h,y,p,g=(0,t.c)(25),{children:T,currencyIdentifiers:S,timeframe:k}=e,{sender:x}=(0,b.useSenderQueryParam)(),j=(0,C.useAddress)(),I=x||j;g[0]!==I?(n={sender:I},g[0]=I,g[1]=n):n=g[1];let _=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(a=[],g[2]=a):a=g[2];let[F,D]=(0,c.useState)(a);g[3]!==S?(o=S.map(eu).join(","),g[3]=S,g[4]=o):o=g[4];let R=o;g[5]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{D([])},g[5]=l):l=g[5],g[6]!==R||g[7]!==_.sender?(u=[R,_.sender],g[6]=R,g[7]=_.sender,g[8]=u):u=g[8],(0,c.useEffect)(l,u);let{registerOptimisticActivityHandler:E}=(0,eo.useSwapRefetch)();g[9]!==E?(d=()=>E(e=>{D(t=>t.some(t=>t.id===e.id)?t:[e,...t])}),f=[E],g[9]=E,g[10]=d,g[11]=f):(d=g[10],f=g[11]),(0,c.useEffect)(d,f);let B=!(S.length>0&&_.sender);g[12]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{e&&D(t=>t.filter(t=>t.transactionHash!==e))},g[12]=v):v=g[12],g[13]!==S||g[14]!==_||g[15]!==F||g[16]!==B||g[17]!==k?(h={currencyIdentifiers:S,filter:_,pause:B,timeframe:k,optimisticActivities:F,onActivityReceived:v},g[13]=S,g[14]=_,g[15]=F,g[16]=B,g[17]=k,g[18]=h):h=g[18];let{annotations:z,rawActivities:M}=function(e){var t;let{currencyIdentifiers:n,filter:a,pause:o,timeframe:l,optimisticActivities:u=[],onActivityReceived:d}=e,f=n.map(i.currencyToContractIdentifierInput),[{data:v}]=(0,P.useQuery)({query:er,variables:{tokens:f,filter:a},context:es,pause:o},{throwOnError:!1}),[h,y]=(0,c.useState)(null!=(t=null==v?void 0:v.globalTokenActivity.items)?t:[]);(0,c.useEffect)(function(){(null==v?void 0:v.globalTokenActivity.items)&&y(v.globalTokenActivity.items)},[v]),(0,s.useSubscription)({query:ea,variables:{tokens:f,filter:a},pause:o},e=>{let t=e.globalTokenActivity,i=t.id;y(e=>e.some(e=>e.id===i)?e:[...e,t]);let n=(0,A.readFragment)(en,t);null==d||d(n.transactionHash)});let{annotations:p,rawActivities:g}=(0,c.useMemo)(()=>{var e;let t=[];return{annotations:null!=(e=h.flatMap(e=>{var a;let s=(0,A.readFragment)(en,e),o=[s.fromToken,s.toToken].find(e=>n.some(t=>(0,i.areCurrenciesEqual)(t,{contractAddress:e.token.address,chainIdentifier:e.token.chain.identifier})));if(!o)return[];let l=s.toToken===o,c=(0,r.bn)(o.usd).dividedBy(o.token.unit).toNumber(),u=c*(l?1:-1),d=new Date(s.timestamp);return t.push({id:e.id,timestamp:s.timestamp,isBuy:l,usdPrice:c,tokenUnit:o.token.unit,transactionHash:null!=(a=s.transactionHash)?a:void 0}),[{date:d,value:u,annotation:s}]}))?e:[],rawActivities:[...u.filter(e=>!t.some(t=>t.transactionHash===e.transactionHash)),...t]}},[h,n,u]),T=N.MAX_BUCKET_SIZE_FOR_TIMEFRAME[null!=l?l:"ONE_DAY"],S=1e3*(0,w.candleBucketSizeToSeconds)(T)*4,k=new Map;for(let e of p){let t=Math.floor(e.date.getTime()/S)*S,i=k.get(t);i?(i.items.unshift(e),i.sumMs+=e.date.getTime(),i.sumValue+=e.value):k.set(t,{items:[e],sumMs:e.date.getTime(),sumValue:e.value})}return{annotations:Array.from(k.values()).map(e=>{let t=e.items.length,i=e.sumMs/t,r=e.sumValue/t;return{date:new Date(i),value:r,content:(0,m.jsx)(et,{activities:e.items.map(e=>e.annotation),currencies:n})}}),rawActivities:g}}(h);g[19]!==z||g[20]!==M?(y={annotations:z,rawActivities:M},g[19]=z,g[20]=M,g[21]=y):y=g[21];let U=y;return g[22]!==T||g[23]!==U?(p=(0,m.jsx)(el.Provider,{value:U,children:T}),g[22]=T,g[23]=U,g[24]=p):p=g[24],p}function eu(e){return"".concat(e.chainIdentifier,":").concat(e.contractAddress)}function ed(){return(0,c.useContext)(el)}e.s(["CurrencyChartProvider",()=>ef,"useCurrencyChart",()=>ev],879658);let em=(0,c.createContext)({hoveredPrice:void 0,setHoveredPrice:()=>{},selectedCandle:void 0,setSelectedCandle:()=>{},chartStartingPrice:void 0,setChartStartingPrice:()=>{},livePrice:{value:(0,r.bn)(0),time:new Date},setLivePrice:()=>{},liveCandle:void 0,setLiveCandle:()=>{},openIndicatorsRef:{current:null},isChartReady:!1,setIsChartReady:()=>{}});function ef(e){let i,n,a,s,o,l=(0,t.c)(15),{children:u,initialPrice:d}=e,[f,v]=(0,c.useState)(),[h,y]=(0,c.useState)(),[p,g]=(0,c.useState)();l[0]!==d?(i=(0,r.bn)(d),l[0]=d,l[1]=i):i=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=new Date,l[2]=n):n=l[2],l[3]!==i?(a={value:i,time:n},l[3]=i,l[4]=a):a=l[4];let[T,S]=(0,c.useState)(a),[k,x]=(0,c.useState)(),b=(0,c.useRef)(null),[C,w]=(0,c.useState)(!1);l[5]!==p||l[6]!==f||l[7]!==C||l[8]!==k||l[9]!==T||l[10]!==h?(s={hoveredPrice:f,setHoveredPrice:v,selectedCandle:h,setSelectedCandle:y,chartStartingPrice:p,setChartStartingPrice:g,livePrice:T,setLivePrice:S,liveCandle:k,setLiveCandle:x,openIndicatorsRef:b,isChartReady:C,setIsChartReady:w},l[5]=p,l[6]=f,l[7]=C,l[8]=k,l[9]=T,l[10]=h,l[11]=s):s=l[11];let A=s;return l[12]!==u||l[13]!==A?(o=(0,m.jsx)(em.Provider,{value:A,children:u}),l[12]=u,l[13]=A,l[14]=o):o=l[14],o}function ev(){return(0,c.useContext)(em)}e.s(["useChartPriceBounds",()=>ey],186083);var eh=e.i(516467);function ey(e){let i,n,a=(0,t.c)(8),{chartData:s,timeRange:o,getPrice:l,live:u}=e,d=void 0!==u&&u,{setChartStartingPrice:m,setLivePrice:f}=ev();a[0]!==s||a[1]!==l||a[2]!==d||a[3]!==m||a[4]!==f||a[5]!==o?(i=()=>{if(0===s.length||!o)return void m(void 0);let e=function(e,t){let i,n,r=+(0,eh.toDate)(e);return isNaN(r)?NaN:(t.forEach((e,t)=>{let a=(0,eh.toDate)(e);if(isNaN(+a)){i=NaN,n=NaN;return}let s=Math.abs(r-a);(null==i||s<n)&&(i=t,n=s)}),i)}(o.startTime,s.map(ep)),t=void 0!==e?s[e]:void 0;if(t){let e=l(t),i=new Date(t.time);m({value:(0,r.bn)(e),time:i})}else m(void 0);if(d){let e=s.at(-1);if(e){let t=l(e),i=new Date(e.time);f({value:(0,r.bn)(t),time:i})}}return()=>{m(void 0)}},n=[s,o,m,l,d,f],a[0]=s,a[1]=l,a[2]=d,a[3]=m,a[4]=f,a[5]=o,a[6]=i,a[7]=n):(i=a[6],n=a[7]),(0,c.useEffect)(i,n)}function ep(e){return e.time}},434018,e=>{"use strict";e.s(["CurrencyLineChartSkeleton",()=>o]);var t=e.i(705378),i=e.i(590268),n=e.i(167368),r=e.i(437153),a=e.i(254842),s=e.i(355772);function o(e){let o,l,c,u,d,m,f=(0,i.c)(12);return f[0]!==e?({className:o,timeframe:c,...l}=e,f[0]=e,f[1]=o,f[2]=l,f[3]=c):(o=f[1],l=f[2],c=f[3]),f[4]!==o||f[5]!==c?(u=(0,r.classNames)((0,s.getSizeClassNames)(c),o),f[4]=o,f[5]=c,f[6]=u):u=f[6],f[7]!==l?(d=(0,t.jsx)(n.ChartSkeleton,{className:"size-full",...l}),f[7]=l,f[8]=d):d=f[8],f[9]!==u||f[10]!==d?(m=(0,t.jsx)(a.Flex,{className:u,children:d}),f[9]=u,f[10]=d,f[11]=m):m=f[11],m}},355772,377345,e=>{"use strict";e.s(["CurrencyLineChart",()=>H,"getSizeClassNames",()=>L],355772);var t=e.i(705378),i=e.i(590268),n=e.i(635341),r=e.i(84060),a=e.i(194153),s=e.i(437153),o=e.i(254842),l=e.i(689379),c=e.i(2795),u=e.i(939365),d=e.i(465172),m=e.i(286423),f=e.i(20904),v=e.i(744797),h=e.i(969498),y=e.i(389852),p=e.i(231538),g=e.i(797614),T=e.i(740100),S=e.i(144551),k=e.i(116889),x=e.i(879658),b=e.i(186083),C=e.i(916660),w=e.i(540173),A=e.i(434018);e.s(["useChartData",()=>q],377345);var P=e.i(682388),N=e.i(683269),j=e.i(230834),I=e.i(35720),_=e.i(437464),F=e.i(358256),D=e.i(667062),R=e.i(204765),E=e.i(708894),B=e.i(391919),z=e.i(750040),M=e.i(685236),U=e.i(575789),O=e.i(940704),V=e.i(32218);function q(e){let{timeRange:t,intervalSize:i,loadMoreBuffer:n=V.INITIAL_LOAD_BUFFER,shouldSetChunkedDataEarly:r=!0,loadData:a,createFillerPoint:s=(e,t)=>({...t,time:e.toISOString()})}=e,o=(0,O.useTranslations)("useChartData"),[l,c]=(0,h.useState)([]),[u,d]=(0,h.useState)(new Date),[y,p]=(0,h.useState)(!1),[g,T]=(0,h.useState)(void 0),{showErrorMessage:S}=(0,N.useToasts)(),k=(0,_.useVisibilityChange)(),x="ONE_SECOND"!==i;(0,h.useEffect)(function(){d(new Date),T(void 0),c([])},[a,i]);let b=(0,h.useMemo)(()=>t?{startTime:t.startTime,endTime:(0,v.min)([t.endTime,u])}:void 0,[null==t?void 0:t.startTime,null==t?void 0:t.endTime,u]),C=(0,h.useMemo)(()=>({timeRange:b,now:u,intervalSize:i}),[b,u,i]),[w]=(0,j.useDebounceValue)(C,250),A=void 0===g?C:w,q=(0,h.useMemo)(()=>{if(!(A.timeRange&&b))return!0;let e=!(0,B.isEqual)(A.timeRange.startTime,b.startTime),t=!(0,B.isEqual)(A.timeRange.endTime,b.endTime),n=A.intervalSize!==i;return e||t||n},[A,b,i]),L=(0,h.useMemo)(()=>!!g&&!y&&!q&&(0,f.differenceInSeconds)(u,g.endTime)<=(0,P.candleBucketSizeToSeconds)(A.intervalSize),[u,g,A.intervalSize,y,q]),H=(0,h.useCallback)((e,t)=>{var i,n;let r=null==(i=e.at(0))?void 0:i.time,a=null==(n=e.at(-1))?void 0:n.time;return r&&a?[...t.filter(e=>(0,E.isBefore)(e.time,r)),...e,...t.filter(e=>(0,R.isAfter)(e.time,a))]:t},[]),$=(0,h.useCallback)(async e=>{let{timeRange:t,intervalSize:i,shouldSetData:n}=e,r=await a(t,i);return n&&c(e=>H(r,e)),r},[a]),Y=(0,h.useCallback)(async e=>{let{timeRange:t,intervalSize:i,shouldSetChunkedDataEarly:n,loadedTimeRange:r}=e,a=(0,V.getChunkedTimeRanges)({timeRange:t,intervalSize:i,maxPointsPerRequest:V.MAX_POINTS_PER_REQUEST}).map(e=>({timeRange:e,intervalSize:i,shouldSetData:n})),s=[];for(let e of(0,M.chunk)(a,3)){let t=await Promise.all(e.map($));n||t.forEach(e=>{s=H(e,s)})}!n&&s.length>0&&c(e=>H(s,e)),r?T({startTime:(0,v.min)([r.startTime,t.startTime]),endTime:(0,z.max)([r.endTime,t.endTime])}):T(t)},[$,H]);(0,h.useEffect)(()=>{!async function(){if(A.timeRange&&!y){p(!0);try{if(!g)return c([]),await Y({timeRange:(0,V.getBufferedTimeRange)(A.timeRange,A.intervalSize,A.now,V.INITIAL_LOAD_BUFFER),intervalSize:A.intervalSize,loadedTimeRange:void 0,shouldSetChunkedDataEarly:!1});let e=[],t=(0,V.getBufferedTimeRange)(A.timeRange,A.intervalSize,A.now,n),i=25*(0,P.candleBucketSizeToSeconds)(A.intervalSize);(0,f.differenceInSeconds)(A.timeRange.startTime,g.startTime)<i&&e.push(Y({timeRange:{startTime:t.startTime,endTime:g.startTime},intervalSize:A.intervalSize,loadedTimeRange:g,shouldSetChunkedDataEarly:r})),(0,f.differenceInSeconds)(g.endTime,A.timeRange.endTime)<i&&(0,f.differenceInSeconds)(A.now,g.endTime)>(0,P.candleBucketSizeToSeconds)(A.intervalSize)&&e.push(Y({timeRange:{startTime:g.endTime,endTime:t.endTime},intervalSize:A.intervalSize,loadedTimeRange:g,shouldSetChunkedDataEarly:r})),await Promise.all(e)}catch(e){(0,F.captureException)(e),S(o("failedToLoadChartData"))}finally{p(!1)}}}()},[A,Y,r,n]),(0,I.useOnChange)(k,()=>{k&&d(new Date)});let Q=e=>{c(n=>{if(y||q)return n;let r=n.at(-1);if(!r){let n=(0,P.candleBucketSizeToSeconds)(i),r=new Date(e.time),a=new Date(1e3*(Math.floor(Math.floor(r.getTime()/1e3)/n)*n)).toISOString();return!g&&t&&T({startTime:t.startTime,endTime:r}),[{...e,time:a}]}if(!L)return n;let a=(0,f.differenceInSeconds)(e.time,r.time),o=(0,P.candleBucketSizeToSeconds)(i),l=n.findIndex(t=>(0,f.differenceInSeconds)(e.time,t.time)<o);if(-1!==l)return[...n.slice(0,l),{...e,time:n[l].time},...n.slice(l+1)];let c=Math.floor(a/o);if(!x){let t=new Date(1e3*(Math.floor(Math.floor(new Date(e.time).getTime()/1e3)/o)*o)).toISOString();return[...n,{...e,time:t}]}return[...n,...(0,U.range)(c).map(t=>{let i=(0,m.addSeconds)(r.time,(t+1)*o).toISOString();return t<c-1?s(new Date(i),r):{...e,time:i}})]})};return(0,h.useEffect)(()=>{let e;if(x)return function t(){let n=new Date,r=l.at(-1);if(!r)return;let a=(0,P.candleBucketSizeToSeconds)(i),o=1e3*a,c=(0,m.addSeconds)(r.time,a),u=(0,D.differenceInMilliseconds)(c,n);if(u<=0){Q(s(n,r)),e=setTimeout(t,o+u);return}e=setTimeout(t,u)}(),()=>{e&&clearTimeout(e)}},[l,i]),{data:l,fetching:y||!g,stale:q,live:L,onLiveUpdate:Q}}let L=e=>e&&(0,T.isInternalDataTimeframe)(e)?"h-[426px] md:h-[476px] lg:h-[450px]":"h-[400px] md:h-[450px]",H=(0,y.withSuspense)(e=>{let{currency:i,timeRange:o,onTimeRangeChange:y,intervalSize:T,className:P,timeframe:N,overrides:j}=e,I=(0,r.useClient)(),_=(0,n.readFragment)(C.CurrencyLineChartFragment,i),F=(0,h.useCallback)(async(e,t)=>{var i;let{data:n,error:r}=await I.query(w.CurrencyLineChartQuery,{startTime:e.startTime.toISOString(),endTime:e.endTime.toISOString(),contractIdentifier:{chain:_.chainIdentifier,address:_.contractAddress},bucketSize:t});if(r)throw r;return null!=(i=null==n?void 0:n.currencyPriceHistory2)?i:[]},[I,_.chainIdentifier,_.contractAddress]),D=(0,k.useCurrencyChartColor)(),{setHoveredPrice:R,setLivePrice:E}=(0,x.useCurrencyChart)(),{annotations:B}=(0,S.useCurrencyChartAnnotations)(),{data:z,fetching:M,stale:U,live:O,onLiveUpdate:V}=q({timeRange:o,loadData:F,intervalSize:T});(0,b.useChartPriceBounds)({chartData:z,timeRange:o,getPrice:(0,h.useCallback)(e=>(0,d.bn)(e.price.usd).toNumber(),[]),live:O});let H=(0,h.useMemo)(()=>{var e,t;return null!=(t=null==(e=_.tokenGroup)?void 0:e.currencies)?t:[_]},[_]);(0,p.useCurrencyPriceUpdateSubscription)(_.isNative?null:H,e=>{V({time:e.timestamp,price:{usd:e.value.toNumber()}}),E({value:e.value,time:new Date(e.timestamp)})}),(0,g.useCurrencyVendorPriceSubscription)(_.isNative?{address:_.contractAddress,chain:_.chainIdentifier}:null,e=>{V({time:e.timestamp,price:{usd:e.value.toNumber()}}),E({value:e.value,time:new Date(e.timestamp)})});let Y=(0,h.useRef)(z.at(-1));return((0,h.useEffect)(function(){let e=z.at(-1),t=z.at(0);if(!(y&&o&&e&&t)){Y.current=void 0;return}if(Y.current&&O){let t=(0,f.differenceInSeconds)(e.time,Y.current.time);if(t>0){let e=new Date,i=(0,v.min)([(0,m.addSeconds)(o.endTime,t),e]),n=Math.max(0,(0,f.differenceInSeconds)(i,o.endTime));z.length<l.MIN_POINTS_FOR_TIME_RANGE_SHIFT?y({startTime:o.startTime,endTime:i}):y({startTime:(0,m.addSeconds)(o.startTime,n),endTime:i})}}Y.current=e},[z,o,y,O]),0===z.length)?M||U?(0,t.jsx)(A.CurrencyLineChartSkeleton,{timeframe:N}):(0,t.jsx)($,{timeframe:N}):(0,t.jsxs)("div",{className:"relative","data-testid":"currency-chart-container",children:[(0,t.jsx)(u.TimeSeriesChart,{annotations:B,areaOptions:D?{strokeColor:D,strokeWidth:2,gradient:{from:D,to:"rgb(var(--color-bg-primary))",fromOpacity:.5,toOpacity:.1}}:void 0,className:(0,s.classNames)(L(N),"w-full",{"opacity-50":M},P),crosshair:!0,data:z,getDate:e=>new Date(e.time),getValue:e=>(0,d.bn)(e.price.usd).toNumber(),hoverDotColor:D||void 0,lineType:"area",live:O,onHover:e=>{if(e)return void R({value:(0,d.bn)(e.item.price.usd),time:new Date(e.item.time)});R(void 0)},onVisibleTimeRangeChange:y,overrides:{YAxis:{hidden:!0,...null==j?void 0:j.YAxis},XAxis:{...null==j?void 0:j.XAxis}},visibleTimeRange:o}),M&&0===z.length&&(0,t.jsx)(a.CenterAligned,{className:"-translate-x-1/2 -translate-y-1/2 pointer-events-none absolute top-1/2 left-1/2",children:(0,t.jsx)(c.Spinner,{})})]})},{fallback:e=>(0,t.jsx)(A.CurrencyLineChartSkeleton,{timeframe:e.timeframe}),errorFallback:(0,t.jsx)($,{variant:"no-data"}),ssr:!1});function $(e){let n,r,a,s,l=(0,i.c)(9),{variant:c,timeframe:d}=e,m=void 0===c?"no-chart-data":c;return l[0]!==d?(n=L(d),l[0]=d,l[1]=n):n=l[1],l[2]!==m?(r="no-data"===m?{EmptyState:{variant:"no-data"}}:void 0,l[2]=m,l[3]=r):r=l[3],l[4]!==r?(a=(0,t.jsx)(u.TimeSeriesChart.EmptyState,{className:"size-full",overrides:r}),l[4]=r,l[5]=a):a=l[5],l[6]!==n||l[7]!==a?(s=(0,t.jsx)(o.Flex,{className:n,children:a}),l[6]=n,l[7]=a,l[8]=s):s=l[8],s}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="21029d74-9a8e-56e3-abe4-515d4d8ed279")}catch(e){}}();
//# debugId=21029d74-9a8e-56e3-abe4-515d4d8ed279
