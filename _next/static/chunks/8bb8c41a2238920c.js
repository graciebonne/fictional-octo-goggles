(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,478193,e=>{"use strict";e.s(["CollectionOffersLayout",()=>lt],478193);var l=e.i(705378),t=e.i(965523),r=e.i(394887),a=e.i(64573),i=e.i(999955),n=e.i(86028),s=e.i(590268),o=e.i(437153),c=e.i(39771),u=e.i(284296),f=e.i(950293),d=e.i(967593),g=e.i(794576),m=e.i(734630),x=e.i(940704),h=e.i(969498),T=e.i(104062),j=e.i(162034),p=e.i(378536),b=e.i(653848);let S={trait:"w-[140px] grow flex-col items-start gap-0.5",topOffer:"w-[140px] grow flex-col items-end gap-0.5"};function y(){let e,t,r,a,i,n=(0,s.c)(11),o=(0,x.useTranslations)("TraitOffersFilterTableHeader");return n[0]!==o?(e=o("trait"),n[0]=o,n[1]=e):e=n[1],n[2]!==e?(t=(0,l.jsx)(b.TableHeaderCell,{className:S.trait,children:e}),n[2]=e,n[3]=t):t=n[3],n[4]!==o?(r=o("topOffer"),n[4]=o,n[5]=r):r=n[5],n[6]!==r?(a=(0,l.jsx)(b.TableHeaderCell,{className:S.topOffer,children:r}),n[6]=r,n[7]=a):a=n[7],n[8]!==t||n[9]!==a?(i=(0,l.jsxs)(p.TableHeader,{className:"bg-transparent",children:[t,a]}),n[8]=t,n[9]=a,n[10]=i):i=n[10],i}var O=e.i(47667),v=e.i(635341),C=e.i(34331),N=e.i(81303),_=e.i(28067),F=e.i(266341),A=e.i(28155),w=e.i(76225),P=e.i(389852),k=e.i(144877),L=e.i(803565);function E(){let e,r,a=(0,s.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(N.TableCell,{className:S.trait,children:(0,l.jsxs)(t.FlexColumn,{className:"gap-0.5",children:[(0,l.jsx)(F.TextLabelSkeleton,{className:"w-[120px]",size:"sm"}),(0,l.jsx)(F.TextLabelSkeleton,{className:"w-20",size:"xs"})]})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsxs)(_.TableRow,{children:[e,(0,l.jsx)(N.TableCell,{className:S.topOffer,children:(0,l.jsxs)(t.FlexColumn,{className:"items-end gap-0.5",children:[(0,l.jsx)(F.TextLabelSkeleton,{className:"w-10",size:"sm"}),(0,l.jsx)(F.TextLabelSkeleton,{className:"w-20",size:"xs"})]})})]}),a[1]=r):r=a[1],r}let R=(0,P.withSuspense)(e=>{let{item:t}=e,r=(0,v.readFragment)(L.TraitOffersFilterTableRowFragment,t),{onSetTraits:a}=(0,k.useTraitsQueryParam)(),i=(0,x.useTranslations)("TraitOffersFilterTableRow");return r?(0,l.jsxs)(_.TableRow,{onClick:()=>a([{traitType:r.traitType,values:[r.traitValue]}]),children:[(0,l.jsxs)(N.TableCell,{className:S.trait,children:[(0,l.jsxs)(c.FlexCenter,{className:"w-full gap-1",children:[(0,l.jsx)(A.TextOverflowTooltip,{children:(0,l.jsx)(F.TextLabel,{size:"sm",children:r.traitValue})}),(0,l.jsx)(w.RarityChip,{className:"flex",percentage:r.traitPercent})]}),(0,l.jsx)(A.TextOverflowTooltip,{children:(0,l.jsx)(F.TextLabel,{color:"text-secondary",size:"xs",children:r.traitType})})]}),(0,l.jsxs)(N.TableCell,{className:S.topOffer,children:[(0,l.jsx)(C.ChangeAnimation,{value:r.bestOfferPrice.token.unit,children:(0,l.jsx)(F.TextLabel,{size:"sm",children:(0,l.jsx)(O.TokenPrice,{price:r.bestOfferPrice,symbolColor:"current"})})}),(0,l.jsx)(C.ChangeAnimation,{value:r.totalValue.token.unit,children:(0,l.jsxs)(F.TextLabel,{color:"text-secondary",size:"xs",children:[i("vol")," ",(0,l.jsx)(O.TokenPrice,{price:r.totalValue,symbolColor:"current"})]})})]})]}):(0,l.jsx)(E,{})},{fallback:(0,l.jsx)(E,{})}),B={height:1e3,width:1e3};function I(e){let t,r,a,i,n=(0,s.c)(15),{searchQuery:c,className:u,traitOfferData:f}=e,d=(0,x.useTranslations)("TraitOffersFilterTable");if(n[0]!==c||n[1]!==f){let e;n[3]!==c?(e=e=>e.traitType.toLowerCase().includes(c.toLowerCase())||e.traitValue.toLowerCase().includes(c.toLowerCase()),n[3]=c,n[4]=e):e=n[4],t=f.filter(e),n[0]=c,n[1]=f,n[2]=t}else t=n[2];let g=t;if(0===g.length){let e,t;return n[5]!==d?(e=d("noTraitOffersFound"),n[5]=d,n[6]=e):e=n[6],n[7]!==e?(t=(0,l.jsx)(T.EmptyState,{description:"",title:e,variant:"no-results"}),n[7]=e,n[8]=t):t=n[8],t}return n[9]!==u?(r=(0,o.classNames)("w-auto",u),n[9]=u,n[10]=r):r=n[10],n[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(y,{}),n[11]=a):a=n[11],n[12]!==g||n[13]!==r?(i=(0,l.jsx)(j.VirtualizedTable,{className:r,contentClassName:"scrollbar-hidden",header:a,initialRect:B,itemKey:V,items:g,renderRow:R,scrollMode:"table",size:"md"}),n[12]=g,n[13]=r,n[14]=i):i=n[14],i}function V(e){return null==e?void 0:e.id}let z=(0,o.classNames)("h-[calc(100%-theme(spacing.8)-theme(spacing.3)-theme(spacing.8)-theme(spacing.3))]");function H(e){let r,a,i,n,T,j,p,b,S,y,O,v,C,N=(0,s.c)(30),{className:_,tableClassName:F,traitOfferData:A}=e,[w,P]=(0,h.useState)(""),k=(0,x.useTranslations)("TraitOffersFilterSection");return N[0]!==_?(r=(0,o.classNames)("h-full gap-3",_),N[0]=_,N[1]=r):r=N[1],N[2]!==k?(a=k("traits"),N[2]=k,N[3]=a):a=N[3],N[4]!==a?(i=(0,l.jsx)(f.TextBody,{size:"sm",children:a}),N[4]=a,N[5]=i):i=N[5],N[6]!==k?(n=k("singleTraitOnly"),N[6]=k,N[7]=n):n=N[7],N[8]===Symbol.for("react.memo_cache_sentinel")?(T=(0,l.jsx)(g.Info,{fill:"text-secondary",size:16}),N[8]=T):T=N[8],N[9]!==n?(j=(0,l.jsx)(d.Tooltip,{content:n,children:T}),N[9]=n,N[10]=j):j=N[10],N[11]!==i||N[12]!==j?(p=(0,l.jsxs)(c.FlexCenter,{className:"h-8 gap-1",children:[i,j]}),N[11]=i,N[12]=j,N[13]=p):p=N[13],N[14]===Symbol.for("react.memo_cache_sentinel")?(b=e=>P(e.target.value),N[14]=b):b=N[14],N[15]!==k?(S=k("searchForTrait"),N[15]=k,N[16]=S):S=N[16],N[17]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(m.Search,{fill:"text-secondary",size:18}),N[17]=y):y=N[17],N[18]!==w||N[19]!==S?(O=(0,l.jsx)(u.Input,{onChange:b,placeholder:S,size:"sm",startEnhancer:y,value:w}),N[18]=w,N[19]=S,N[20]=O):O=N[20],N[21]!==w||N[22]!==F||N[23]!==A?(v=(0,l.jsx)(I,{className:F,searchQuery:w,traitOfferData:A}),N[21]=w,N[22]=F,N[23]=A,N[24]=v):v=N[24],N[25]!==r||N[26]!==O||N[27]!==v||N[28]!==p?(C=(0,l.jsxs)(t.FlexColumn,{className:r,children:[p,O,v]}),N[25]=r,N[26]=O,N[27]=v,N[28]=p,N[29]=C):C=N[29],C}function $(e){let r,a=(0,s.c)(2),{traitOfferData:i}=e;return a[0]!==i?(r=(0,l.jsx)(t.FlexColumn,{children:(0,l.jsx)(H,{tableClassName:z,traitOfferData:i})}),a[0]=i,a[1]=r):r=a[1],r}var q=e.i(699682),Q=e.i(565583),K=e.i(528198),M=e.i(637293),D=e.i(1069),G=e.i(657980);e.i(402819);var U=e.i(916744);let Z=(0,K.graphql)("\n    subscription useCollectionOffersSubscription(\n      $collectionSlug: String!\n      $filter: CollectionOffersFilter\n    ) {\n      collectionOfferAggregates(\n        collectionSlug: $collectionSlug\n        filter: $filter\n      ) {\n        id\n        totalOffers\n        offerPrice {\n          token {\n            unit\n          }\n        }\n        ...OfferAggregateTable\n      }\n    }\n  ",[D.OfferAggregateTableFragment]);class Y extends G.Paginator{getValues(e){return[e.offerPrice.token.unit,e.id]}}let J=new Y;var W=e.i(771968),X=e.i(502732),ee=e.i(756344),el=e.i(444501),et=e.i(878221);let er={offerPrice:"grow",totalVolume:"grow",totalOffers:"grow",bidders:"grow"};function ea(e){let t,r,a,i,n,o,c,u,f,d=(0,s.c)(22),{className:g}=e,m=(0,x.useTranslations)("OfferAggregateTableHeader");return d[0]!==m?(t=m("offerPrice"),d[0]=m,d[1]=t):t=d[1],d[2]!==t?(r=(0,l.jsx)(b.TableHeaderCell,{className:er.offerPrice,children:t}),d[2]=t,d[3]=r):r=d[3],d[4]!==m?(a=m("volume"),d[4]=m,d[5]=a):a=d[5],d[6]!==a?(i=(0,l.jsx)(b.TableHeaderCell,{align:"right",className:er.totalVolume,children:a}),d[6]=a,d[7]=i):i=d[7],d[8]!==m?(n=m("offers"),d[8]=m,d[9]=n):n=d[9],d[10]!==n?(o=(0,l.jsx)(b.TableHeaderCell,{align:"right",className:er.totalOffers,children:n}),d[10]=n,d[11]=o):o=d[11],d[12]!==m?(c=m("bidders"),d[12]=m,d[13]=c):c=d[13],d[14]!==c?(u=(0,l.jsx)(b.TableHeaderCell,{align:"right",className:er.bidders,children:c}),d[14]=c,d[15]=u):u=d[15],d[16]!==g||d[17]!==r||d[18]!==i||d[19]!==o||d[20]!==u?(f=(0,l.jsxs)(p.TableHeader,{className:g,children:[r,i,o,u]}),d[16]=g,d[17]=r,d[18]=i,d[19]=o,d[20]=u,d[21]=f):f=d[21],f}var ei=e.i(986853),en=e.i(747998),es=e.i(305134),eo=e.i(567089),ec=e.i(254842),eu=e.i(972483),ef=e.i(438249),ed=e.i(457628),eg=e.i(861316);e.i(500598);var em=e.i(207225),ex=e.i(66505);function eh(e){let r,a=(0,s.c)(3),{item:i}=e,[n,o]=(0,h.useState)(!1),c=(0,v.readFragment)(ex.OfferAggregateBiddersFragment,i),u=(0,em.useAddress)(),d=(0,x.useTranslations)("OfferAggregateBidders"),g=null==c?void 0:c.bidders.find(e=>(0,eg.isAddressEqual)(e.address,u)),m=(null==c?void 0:c.bidders.filter(e=>!(0,eg.isAddressEqual)(e.address,u)))||[],T=(null==c?void 0:c.bidders.length)?(0,l.jsxs)(ed.UnstyledButton,{className:"flex gap-2",onClick:e=>{e.stopPropagation(),e.preventDefault(),o(!0)},children:[(0,l.jsx)(es.Facepile,{avatars:[...m,...g?[g]:[]].slice(0,3).map(ep)}),(0,l.jsx)(f.TextBody,{children:g?0===m.length?d("you"):d("othersAndYou",{count:m.length}):m.length.toString()})]}):0,j=n?(0,l.jsx)(eu.Modal,{content:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu.ModalHeader,{className:"pt-8",children:(0,l.jsxs)(t.FlexColumn,{className:"gap-4",children:[(0,l.jsx)(eu.ModalHeaderTitle,{children:d("bidders")}),(0,l.jsxs)(ec.Flex,{className:"gap-2",children:[(0,l.jsx)(eo.Chip,{children:d.rich("offer",{price:()=>(0,l.jsx)(O.TokenPrice,{price:null==c?void 0:c.offerPrice})})}),(0,l.jsx)(eo.Chip,{children:d("numOffers",{count:(null==c?void 0:c.totalOffers)||0})}),(0,l.jsx)(eo.Chip,{children:d.rich("volume",{price:()=>(0,l.jsx)(O.TokenPrice,{price:null==c?void 0:c.totalValue})})})]})]})}),(0,l.jsx)(eu.ModalBody,{className:"px-4 pb-[18px]",children:(0,l.jsx)(ef.Table,{header:(0,l.jsxs)(p.TableHeader,{className:"bg-transparent pb-1.5",children:[(0,l.jsx)(b.TableHeaderCell,{className:"grow",children:d("wallet")}),(0,l.jsx)(b.TableHeaderCell,{align:"right",className:"grow",children:d("quantity")})]}),itemKey:ej,items:[...g?[g]:[],...m],renderRow:eb})})]}),onClick:eT,onOpenChange:o,open:!0}):null;return a[0]!==T||a[1]!==j?(r=(0,l.jsxs)(l.Fragment,{children:[T,j]}),a[0]=T,a[1]=j,a[2]=r):r=a[2],r}function eT(e){e.stopPropagation(),e.preventDefault()}function ej(e,l){return l}function ep(e){let{imageUrl:l,address:t}=e;return{src:l||void 0,seed:t}}function eb(e){let t,r,a,i=(0,s.c)(8),{item:n}=e,o=(0,em.useAddress)(),c=null!=o?o:null;return i[0]!==n||i[1]!==c?(t=(0,l.jsx)(N.TableCell,{className:"grow p-0",children:(0,l.jsx)(en.AccountLockup,{account:n,connectedAddress:c})}),i[0]=n,i[1]=c,i[2]=t):t=i[2],i[3]!==n.quantity?(r=(0,l.jsx)(N.TableCell,{align:"right",className:"grow",children:n.quantity}),i[3]=n.quantity,i[4]=r):r=i[4],i[5]!==t||i[6]!==r?(a=(0,l.jsxs)(_.TableRow,{children:[t,r]}),i[5]=t,i[6]=r,i[7]=a):a=i[7],a}var eS=e.i(508205),ey=e.i(601056),eO=e.i(519078),ev=e.i(310578);function eC(){let e,t,r,a,i,n=(0,s.c)(5);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(N.TableCell,{className:er.offerPrice,children:(0,l.jsx)(ev.SkeletonLine,{className:"w-1/2"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(N.TableCell,{align:"right",className:er.totalVolume,children:(0,l.jsx)(ev.SkeletonLine,{className:"w-1/2"})}),n[1]=t):t=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(N.TableCell,{align:"right",className:er.totalOffers,children:(0,l.jsx)(ev.SkeletonLine,{className:"w-1/2"})}),n[2]=r):r=n[2],n[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(ey.ItemAvatar,{children:(0,l.jsx)(ev.SkeletonBlock,{className:"rounded-full"})}),n[3]=a):a=n[3],n[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsxs)(_.TableRow,{children:[e,t,r,(0,l.jsx)(N.TableCell,{align:"right",className:er.bidders,children:(0,l.jsxs)(ey.Item,{className:"w-1/2",variant:"unstyled",children:[a,(0,l.jsx)(eO.ItemContent,{children:(0,l.jsx)(ev.SkeletonLine,{})})]})})]}),n[4]=i):i=n[4],i}function eN(e){var t,r,a;let i,n,o,c,u,f,d,g,m,x,h,T,j,p=(0,s.c)(37),{item:b,context:S}=e,{firstTrait:y}=(0,k.useTraitsQueryParam)();p[0]!==b?(i=(0,v.readFragment)(eS.OfferAggregateTableRowFragment,b),p[0]=b,p[1]=i):i=p[1];let F=i,A=null==S?void 0:S.collection;p[2]!==A?(n=(0,v.readFragment)(eS.OfferAggregateTableRow_collectionFragment,A),p[2]=A,p[3]=n):n=p[3];let w=n;p[4]!==y?(o=y?[y]:void 0,p[4]=y,p[5]=o):o=p[5];let P=null!=(t=null==F?void 0:F.offerPrice.token.unit)?t:0,L=null!=(r=null==F?void 0:F.offerPrice.token.contractAddress)?r:"";p[6]!==P||p[7]!==L?(c={unit:P,contractAddress:L},p[6]=P,p[7]=L,p[8]=c):c=p[8],p[9]!==o||p[10]!==c?(u={traits:o,initialPrice:c},p[9]=o,p[10]=c,p[11]=u):u=p[11];let{disabled:E,createCollectionOffer:R}=(0,et.useCollectionOffers)(w,u);if(!F){let e;return p[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(eC,{}),p[12]=e):e=p[12],e}let B=F.totalValue.token.unit/(null!=(a=null==S?void 0:S.maxTokenValueInTick)?a:0)*100,I=!E,V=E?void 0:R;return p[13]!==F.offerPrice?(f=(0,l.jsx)(O.TokenPrice,{className:"px-[8px] py-[9px]",price:F.offerPrice}),p[13]=F.offerPrice,p[14]=f):f=p[14],p[15]!==B||p[16]!==f?(d=(0,l.jsx)(N.TableCell,{className:er.offerPrice,children:(0,l.jsx)(ei.Progress,{value:B,variant:"green",children:f})}),p[15]=B,p[16]=f,p[17]=d):d=p[17],p[18]!==F.totalValue?(g=(0,l.jsx)(O.TokenPrice,{price:F.totalValue}),p[18]=F.totalValue,p[19]=g):g=p[19],p[20]!==F.totalValue.token.unit||p[21]!==g?(m=(0,l.jsx)(N.TableCell,{align:"right",className:er.totalVolume,children:(0,l.jsx)(C.ChangeAnimation,{value:F.totalValue.token.unit,children:g})}),p[20]=F.totalValue.token.unit,p[21]=g,p[22]=m):m=p[22],p[23]!==F.totalOffers?(x=(0,l.jsx)(N.TableCell,{align:"right",className:er.totalOffers,children:(0,l.jsx)(C.ChangeAnimation,{value:F.totalOffers,children:F.totalOffers})}),p[23]=F.totalOffers,p[24]=x):x=p[24],p[25]!==F?(h=(0,l.jsx)(eh,{item:F}),p[25]=F,p[26]=h):h=p[26],p[27]!==F.bidders.length||p[28]!==h?(T=(0,l.jsx)(N.TableCell,{align:"right",className:er.bidders,children:(0,l.jsx)(C.ChangeAnimation,{value:F.bidders.length,children:h})}),p[27]=F.bidders.length,p[28]=h,p[29]=T):T=p[29],p[30]!==V||p[31]!==d||p[32]!==m||p[33]!==x||p[34]!==T||p[35]!==I?(j=(0,l.jsxs)(_.TableRow,{interactive:I,onClick:V,children:[d,m,x,T]}),p[30]=V,p[31]=d,p[32]=m,p[33]=x,p[34]=T,p[35]=I,p[36]=j):j=p[36],j}let e_=Array.from({length:M.COLLECTION_OFFERS_TABLE_PAGE_SIZE},()=>{});function eF(){let e,t,r=(0,s.c)(4),a=(0,ee.useHasSearchFilters)()?"after-hero-header-search-pills":"after-hero-header-toolbar";return r[0]!==a?(e=(0,el.topStickyVariants)({variant:a,tableHeader:!0}),r[0]=a,r[1]=e):e=r[1],r[2]!==e?(t=(0,l.jsx)(ef.Table,{dividers:!0,header:(0,l.jsx)(ea,{className:e}),itemKey:eA,items:e_,renderRow:eC,size:"md"}),r[2]=e,r[3]=t):t=r[3],t}function eA(e,l){return l}let ew={height:1e3,width:1e3},eP=(0,P.withSuspense)(e=>{let{items:t,pagination:r,collection:a,traits:i,maxTokenValueInTick:n}=e,s=(0,x.useTranslations)("OfferAggregateTable"),o=(0,v.readFragment)(D.OfferAggregateTable_collectionFragment,a),c=t.map(e=>(0,v.readFragment)(D.OfferAggregateTableFragment,e)),{disabled:u,disabledReason:f,createCollectionOffer:g}=(0,et.useCollectionOffers)(o,{traits:i}),m=(0,ee.useHasSearchFilters)(),h=u?f:(null==i?void 0:i.length)===1?"".concat(i[0].traitType,": ").concat(i[0].value):i&&i.length>1?"".concat(i.length," traits"):void 0;return c.length?(0,l.jsx)(j.VirtualizedTable,{className:"mb-24 w-full",context:{maxTokenValueInTick:n,collection:o},dividers:!0,header:(0,l.jsx)(ea,{className:(0,el.topStickyVariants)({variant:m?"after-hero-header-search-pills":"after-hero-header-toolbar",tableHeader:!0})}),initialRect:ew,itemKey:e=>null==e?void 0:e.id,items:c,renderRow:eN,size:"md",...r}):(0,l.jsx)(T.EmptyState,{className:"min-h-64 py-10",description:s("description"),extra:(0,l.jsx)(d.Tooltip,{content:h,disabled:!h,children:(0,l.jsx)("span",{children:(0,l.jsx)(X.Button,{disabled:u,onClick:()=>{g()},size:"lg",variant:"tertiary",children:s("createOffer")})})}),size:"lg",title:s("noOffersTitle"),variant:"no-results"})},{fallback:(0,l.jsx)(eF,{}),errorFallback:(0,l.jsx)(T.EmptyState,{size:"lg",variant:"no-data"})});var ek=e.i(512813);let eL=(0,P.withSuspense)(e=>{var t,r;let{collectionSlug:a}=e,i=(0,h.useRef)(void 0),{items:n,pagination:o,setItems:c}=(0,W.usePaginatedQuery)({query:ek.CollectionOffersTableQuery,variables:{collectionSlug:a,filter:{},sort:M.COLLECTION_OFFERS_SORT,limit:M.COLLECTION_OFFERS_TABLE_PAGE_SIZE}},e=>(i.current=null==e?void 0:e.collectionBySlug,null==e?void 0:e.collectionOfferAggregates),{pageSize:M.COLLECTION_OFFERS_TABLE_PAGE_SIZE,autoScrollToTop:!0}),u=(0,Q.useCollectionOfferTotals)({collectionSlug:a,filter:{}});return!function(e){let l,t,r,a=(0,s.c)(6),{collectionSlug:i,setItems:n,pagination:o}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(l={},a[0]=l):l=a[0],a[1]!==i?(t={query:Z,variables:{collectionSlug:i,filter:l}},a[1]=i,a[2]=t):t=a[2],a[3]!==o||a[4]!==n?(r=e=>{let l=e.collectionOfferAggregates;n(e=>e.find(e=>e.id===l.id)&&0===l.totalOffers?J.remove(l,e,M.COLLECTION_OFFERS_SORT):J.insertInOrder(l,e,M.COLLECTION_OFFERS_SORT,{insertIntoLastPlace:!o.hasNext}))},a[3]=o,a[4]=n,a[5]=r):r=a[5],(0,U.useSubscription)(t,r)}({collectionSlug:a,setItems:c,pagination:o}),(0,l.jsx)(eP,{collection:(null==(t=i.current)?void 0:t.__typename)==="Collection"?i.current:null,items:n,maxTokenValueInTick:null!=(r=null==u?void 0:u.maxValueInTick.token.unit)?r:0,pagination:o})},{fallback:(0,l.jsx)(eF,{}),errorFallback:(0,l.jsx)(T.EmptyState,{size:"lg",variant:"no-data"})});var eE=G;let eR=(0,K.graphql)("\n    subscription useTraitOfferAggregatesSubscription(\n      $collectionSlug: String!\n      $filter: TraitOffersFilter\n    ) {\n      traitOfferAggregates(collectionSlug: $collectionSlug, filter: $filter) {\n        id\n        totalOffers\n        offerPrice {\n          usd\n        }\n        ...OfferAggregateTable\n      }\n    }\n  ",[D.OfferAggregateTableFragment]);class eB extends eE.Paginator{getValues(e){return[e.offerPrice.usd,e.id]}}let eI=new eB,eV=(0,K.graphql)("\n    query TraitOffersTableQuery(\n      $collectionSlug: String!\n      $filter: TraitOffersFilter\n      $sort: TraitOfferAggregateSort!\n      $cursor: String\n      $limit: Int!\n    ) {\n      traitOfferAggregates(\n        collectionSlug: $collectionSlug\n        filter: $filter\n        sort: $sort\n        cursor: $cursor\n        limit: $limit\n      ) {\n        items {\n          id\n          totalOffers\n          offerPrice {\n            usd\n          }\n          ...OfferAggregateTable\n        }\n        nextPageCursor\n      }\n      collectionBySlug(slug: $collectionSlug) {\n        ...OfferAggregateTable_collection\n      }\n    }\n  ",[D.OfferAggregateTable_collectionFragment,D.OfferAggregateTableFragment]),ez=(0,P.withSuspense)(e=>{var t,r;let{collectionSlug:a}=e,i=(0,h.useRef)(void 0),{firstTrait:n}=(0,k.useTraitsQueryParam)(),o={traitType:null==n?void 0:n.traitType,traitValue:null==n?void 0:n.value},{items:c,pagination:u,setItems:f}=(0,W.usePaginatedQuery)({query:eV,variables:{collectionSlug:a,filter:{traitType:null==n?void 0:n.traitType,traitValue:null==n?void 0:n.value},sort:M.COLLECTION_OFFERS_SORT,limit:M.COLLECTION_OFFERS_TABLE_PAGE_SIZE}},e=>(i.current=null==e?void 0:e.collectionBySlug,null==e?void 0:e.traitOfferAggregates),{pageSize:M.COLLECTION_OFFERS_TABLE_PAGE_SIZE,autoScrollToTop:!0});!function(e){let l,t,r=(0,s.c)(6),{collectionSlug:a,setItems:i,pagination:n,filter:o}=e;r[0]!==a||r[1]!==o?(l={query:eR,variables:{collectionSlug:a,filter:o}},r[0]=a,r[1]=o,r[2]=l):l=r[2],r[3]!==n||r[4]!==i?(t=e=>{let l=e.traitOfferAggregates;i(e=>e.find(e=>e.id===l.id)&&0===l.totalOffers?eI.remove(l,e,M.COLLECTION_OFFERS_SORT):eI.insertInOrder(l,e,M.COLLECTION_OFFERS_SORT,{insertIntoLastPlace:!n.hasNext}))},r[3]=n,r[4]=i,r[5]=t):t=r[5],(0,U.useSubscription)(l,t)}({collectionSlug:a,setItems:f,pagination:u,filter:o});let d=(0,q.useTraitOfferAggregatesTotal)({collectionSlug:a,filter:{traitType:null==n?void 0:n.traitType,traitValue:null==n?void 0:n.value}}).find(e=>e.traitType===(null==n?void 0:n.traitType)&&e.traitValue===n.value);return(0,l.jsx)(eP,{collection:(null==(t=i.current)?void 0:t.__typename)==="Collection"?i.current:null,items:c,maxTokenValueInTick:null!=(r=null==d?void 0:d.maxValueInTick.usd)?r:0,pagination:u,traits:n?[{traitType:n.traitType,value:n.value}]:void 0},JSON.stringify(o))},{fallback:(0,l.jsx)(eF,{}),errorFallback:(0,l.jsx)(T.EmptyState,{size:"lg",variant:"no-data"})});function eH(e){let r,a=(0,s.c)(3),{collectionSlug:i}=e,{traits:n}=(0,k.useTraitsQueryParam)();return a[0]!==i||a[1]!==n.length?(r=(0,l.jsx)(t.FlexColumn,{className:"w-full",children:n.length>0?(0,l.jsx)(ez,{collectionSlug:i}):(0,l.jsx)(eL,{collectionSlug:i})}),a[0]=i,a[1]=n.length,a[2]=r):r=a[2],r}var e$=e.i(333799),eq=e.i(277707),eQ=e.i(248452),eK=e.i(186677),eM=e.i(649386);function eD(e){let t,r,a,i,n=(0,s.c)(10),{slug:o}=e,{address:c}=(0,eQ.useAccount)(),u=(0,x.useTranslations)("CollectionItemsProfileOffersButton");if(!c)return null;let f="".concat((0,eK.getProfileUrlByIdentifier)(c),"/offers");return n[0]!==o?(t={[eM.QUERY_PARAM_KEYS.collectionSlugs]:o},n[0]=o,n[1]=t):t=n[1],n[2]!==f||n[3]!==t?(r={pathname:f,query:t},n[2]=f,n[3]=t,n[4]=r):r=n[4],n[5]!==u?(a=u("yourOffers"),n[5]=u,n[6]=a):a=n[6],n[7]!==r||n[8]!==a?(i=(0,l.jsx)(X.Button,{href:r,size:"sm",variant:"secondary",children:a}),n[7]=r,n[8]=a,n[9]=i):i=n[9],i}var eG=e.i(398896),eU=e.i(71932);let eZ=(0,P.withSuspense)(e=>{var t;let{collectionSlug:r}=e,[{data:a}]=(0,e$.useQuery)({query:eU.CollectionOffersActionBarQuery,variables:{collectionSlug:r}});return(0,l.jsx)(eG.ItemSelectionActionBar,{children:(0,l.jsxs)(c.FlexCenter,{className:"gap-4",children:[(0,l.jsx)(eq.CollectionItemsMakeOfferButton,{collection:(null==a||null==(t=a.collectionBySlug)?void 0:t.__typename)==="Collection"?a.collectionBySlug:null,variant:"primary"}),(0,l.jsx)(eD,{slug:r})]})})},{fallback:(0,l.jsx)(eG.ItemSelectionActionBar,{children:(0,l.jsx)(eq.CollectionItemsMakeOfferButton,{})})}),eY=(0,e.i(575789).range)(10).map(()=>void 0);function eJ(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ef.Table,{contentClassName:"w-auto",header:(0,l.jsx)(y,{}),itemKey:eW,items:eY,renderRow:E,size:"md"}),t[0]=e):e=t[0],e}function eW(e,l){return l}function eX(){let e,r,a,i,n,o,d,g=(0,s.c)(13),h=(0,x.useTranslations)("TraitOffersFilterSection");return g[0]!==h?(e=h("traits"),g[0]=h,g[1]=e):e=g[1],g[2]!==e?(r=(0,l.jsx)(c.FlexCenter,{className:"h-8",children:(0,l.jsx)(f.TextBody,{size:"sm",children:e})}),g[2]=e,g[3]=r):r=g[3],g[4]!==h?(a=h("searchForTrait"),g[4]=h,g[5]=a):a=g[5],g[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(m.Search,{fill:"text-secondary",size:18}),g[6]=i):i=g[6],g[7]!==a?(n=(0,l.jsx)(u.Input,{placeholder:a,size:"sm",startEnhancer:i}),g[7]=a,g[8]=n):n=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(eJ,{}),g[9]=o):o=g[9],g[10]!==r||g[11]!==n?(d=(0,l.jsxs)(t.FlexColumn,{className:"h-full gap-3",children:[r,n,o]}),g[10]=r,g[11]=n,g[12]=d):d=g[12],d}var e0=e.i(215661),e1=e.i(28522),e2=e.i(425521),e3=e.i(738480),e5=e.i(258343),e4=e.i(783277);let e8=(0,P.withSuspense)(e=>{let{offerAggregateTotals:t}=e,r=(0,x.useTranslations)("OfferAggregateTotals"),a=(0,v.readFragment)(e4.OfferAggregateTotalsFragment,t),i=a.totalOffers,n=a.totalValue.token.unit;return(0,l.jsxs)(e5.SpaceBetween,{className:"grow items-center",children:[(0,l.jsxs)(c.FlexCenter,{className:"gap-1.5",children:[(0,l.jsx)(C.ChangeAnimation,{display:"quantity",value:i,children:(0,l.jsx)(e3.NumberDisplay,{className:"text-sm",display:"quantity",value:i})}),(0,l.jsx)(f.TextBody,{className:"font-mono",color:"text-secondary",size:"sm",children:r("offersCount",{count:i})})]}),(0,l.jsxs)(c.FlexCenter,{className:"gap-1.5",children:[(0,l.jsx)(f.TextBody,{color:"text-secondary",children:r("CollectionOfferAggregateTotal"===a.__typename?"totalCollectionOffers":"totalTraitOffers")}),(0,l.jsx)(C.ChangeAnimation,{value:n,children:(0,l.jsx)(O.TokenPrice,{className:"text-sm",price:a.totalValue,symbolColor:"text-primary"})})]})]})},{fallback:(0,l.jsx)(e6,{})});function e6(){let e,t,r,a,i,n=(0,s.c)(8),o=(0,x.useTranslations)("OfferAggregateTotals");return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(f.TextBodySkeleton,{className:"w-10"}),n[0]=e):e=n[0],n[1]!==o?(t=o("offersCount",{count:0}),n[1]=o,n[2]=t):t=n[2],n[3]!==t?(r=(0,l.jsxs)(c.FlexCenter,{className:"items-end gap-1.5",children:[e,(0,l.jsxs)(f.TextBody,{className:"font-mono",color:"text-secondary",children:["Â ",t]})]}),n[3]=t,n[4]=r):r=n[4],n[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(c.FlexCenter,{className:"items-end gap-1.5",children:(0,l.jsx)(f.TextBodySkeleton,{className:"w-20"})}),n[5]=a):a=n[5],n[6]!==r?(i=(0,l.jsxs)(e5.SpaceBetween,{className:"grow items-center",children:[r,a]}),n[6]=r,n[7]=i):i=n[7],i}let e7=(0,P.withSuspense)(e=>{let{collectionSlug:t}=e,{collectionOfferStatuses:r}=(0,e2.useCollectionOfferStatusQueryParam)(),a=(0,em.useAddress)(),i=(0,Q.useCollectionOfferTotals)({collectionSlug:t,filter:{ownedBy:r.includes("yourOffers")?a:void 0}});return i?(0,l.jsx)(e8,{offerAggregateTotals:i}):(0,l.jsx)(e6,{})},{fallback:(0,l.jsx)(e6,{})}),e9=(0,P.withSuspense)(e=>{let{collectionSlug:t}=e,{firstTrait:r}=(0,k.useTraitsQueryParam)(),a=(0,q.useTraitOfferAggregatesTotal)({collectionSlug:t,filter:{traitType:null==r?void 0:r.traitType,traitValue:null==r?void 0:r.value}});if(!a.length)return(0,l.jsx)(e6,{});let i=a.find(e=>e.traitType===(null==r?void 0:r.traitType)&&e.traitValue===r.value);return(0,l.jsx)(e8,{offerAggregateTotals:null!=i?i:a[0]})},{fallback:(0,l.jsx)(e6,{})});function le(e){let t,r,a,i=(0,s.c)(6),{collectionSlug:n,showSidePanelToggle:o}=e,c=void 0===o||o;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(e1.SearchPills,{variant:"filter-layout-toolbar"}),i[0]=t):t=i[0],i[1]!==n?(r=(0,l.jsx)(ll,{collectionSlug:n}),i[1]=n,i[2]=r):r=i[2],i[3]!==c||i[4]!==r?(a=(0,l.jsx)(e0.FilterLayoutToolbar,{pills:t,pillsLayout:"vertical",showSidePanelToggle:c,variant:"heroHeader",children:r}),i[3]=c,i[4]=r,i[5]=a):a=i[5],a}function ll(e){let t,r=(0,s.c)(7),{collectionSlug:a}=e,{traits:i,firstTrait:n}=(0,k.useTraitsQueryParam)();if(i.length>0){let e,t;return r[0]!==n?(e=JSON.stringify(n),r[0]=n,r[1]=e):e=r[1],r[2]!==a||r[3]!==e?(t=(0,l.jsx)(e9,{collectionSlug:a},e),r[2]=a,r[3]=e,r[4]=t):t=r[4],t}return r[5]!==a?(t=(0,l.jsx)(e7,{collectionSlug:a}),r[5]=a,r[6]=t):t=r[6],t}let lt=(0,P.withSuspense)(e=>{let{collectionSlug:s}=e,o=(0,q.useTraitOfferAggregatesTotal)({collectionSlug:s}),c=o.length>0;return(0,l.jsxs)(n.CollectionItemsSelectionProvider,{children:[(0,l.jsx)(i.HeroHeaderFilterLayout,{filterSheet:c?(0,l.jsx)(a.FilterSheet,{children:(0,l.jsx)($,{traitOfferData:o})}):null,filterSidePanel:c?(0,l.jsx)(t.FlexColumn,{className:(0,r.sidePanelVariants)({page:"collection",type:"filter",actionBar:!0}),children:(0,l.jsx)($,{traitOfferData:o})}):null,main:(0,l.jsx)(eH,{collectionSlug:s}),page:"collection",sideColumnSize:"lg",toolbar:(0,l.jsx)(le,{collectionSlug:s,showSidePanelToggle:c})}),(0,l.jsx)(eZ,{collectionSlug:s})]})},{fallback:function(e){let n,o,c,u,f=(0,s.c)(5),{collectionSlug:d}=e;return f[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(a.FilterSheet,{children:(0,l.jsx)(eX,{})}),f[0]=n):n=f[0],f[1]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(t.FlexColumn,{className:(0,r.sidePanelVariants)({page:"collection",type:"filter",actionBar:!0}),children:(0,l.jsx)(eX,{})}),c=(0,l.jsx)(eF,{}),f[1]=o,f[2]=c):(o=f[1],c=f[2]),f[3]!==d?(u=(0,l.jsx)(i.HeroHeaderFilterLayout,{filterSheet:n,filterSidePanel:o,main:c,page:"collection",sideColumnSize:"lg",toolbar:(0,l.jsx)(le,{collectionSlug:d})}),f[3]=d,f[4]=u):u=f[4],u}})}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c34e846b-51c9-5431-a8f8-e188fd210eb5")}catch(e){}}();
//# debugId=c34e846b-51c9-5431-a8f8-e188fd210eb5
